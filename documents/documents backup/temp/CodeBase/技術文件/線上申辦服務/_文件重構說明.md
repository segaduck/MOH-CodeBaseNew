# 證書補換發服務文件重構說明

## 重構目的

為了提高技術文件的可重用性和可讀性，我們將原本的兩份詳細文件（001005 和 001007）重構為：

1. **1 份共用架構文件**：包含所有證書補換發服務的共用架構和技術模式
2. **2 份服務專屬文件**：只包含各服務的獨特部分和差異

## 文件結構對比

### 重構前

```
001005_醫事人員證書補換發_詳細.md (1,886 行)
├── 包含：共用架構 + 001005 專屬內容
└── 問題：大量重複內容

001007_專科醫師證書補換發_詳細.md (2,100 行)
├── 包含：共用架構 + 001007 專屬內容
└── 問題：大量重複內容

總計：3,986 行（含大量重複）
```

### 重構後

```
_證書補換發服務_共用架構文件.md (1,245 行)
├── 系統架構層次
├── 前端實作共用模式
├── 後端 Controller 共用模式
├── 資料存取層 (DAO) 共用模式
├── 資料庫結構共用模式
├── 完整流程圖
├── ViewModel 與 Entity 共用模式
├── 技術重點總結
└── 開發新服務的步驟

001005_醫事人員證書補換發_專屬.md (497 行)
├── 服務基本資訊
├── 服務專屬欄位（DIVISION, ISSUE_DEPT, LIC_TYPE）
├── ViewModel 專屬屬性
├── Entity Model 專屬屬性
├── View 專屬欄位
├── JavaScript 專屬驗證邏輯
├── DAO 方法專屬實作
├── 與其他服務的差異
└── 附件需求

001007_專科醫師證書補換發_專屬.md (493 行)
├── 服務基本資訊
├── 服務專屬欄位（LIC_TYPE 用於專科類別）
├── ViewModel 專屬屬性
├── Entity Model 專屬屬性
├── View 專屬欄位
├── JavaScript 專屬驗證邏輯
├── DAO 方法專屬實作
├── 與其他服務的差異
└── 附件需求

總計：2,235 行（無重複，減少 44%）
```

## 重構效益

### 1. 減少重複內容

- **重構前**：3,986 行（含大量重複的架構說明）
- **重構後**：2,235 行（共用內容只寫一次）
- **減少比例**：44% 的內容減少

### 2. 提高可維護性

- **共用架構更新**：只需修改一份文件，所有服務自動受益
- **服務專屬更新**：只需修改對應的專屬文件，不影響其他服務
- **新增服務**：參考共用文件 + 複製專屬文件範本即可

### 3. 提高可讀性

- **學習曲線降低**：先讀共用文件了解整體架構，再讀專屬文件了解差異
- **重點突出**：專屬文件只包含獨特部分，更容易找到關鍵差異
- **結構清晰**：文件職責分明，不會混淆

### 4. 可擴展性

適用於所有類似的證書補換發服務：
- 001005 - 醫事人員證書補(換)發
- 001007 - 專科醫師證書補(換)發
- 001036 - 專科護理師證書補(換)發
- 未來新增的證書補換發服務

## 使用方式

### 開發人員

**學習新服務時：**
1. 先閱讀 `_證書補換發服務_共用架構文件.md` 了解整體架構
2. 再閱讀對應的服務專屬文件（如 `001005_醫事人員證書補換發_專屬.md`）
3. 結合兩者即可完整了解該服務的技術規格

**開發新服務時：**
1. 參考 `_證書補換發服務_共用架構文件.md` 的「開發新服務的步驟」章節
2. 複製現有的專屬文件作為範本
3. 修改服務代碼、服務名稱、專屬欄位等

**維護現有服務時：**
- 如果是共用邏輯的修改：更新共用架構文件
- 如果是服務專屬的修改：更新對應的專屬文件

### 文件維護人員

**更新共用架構時：**
- 確認修改是否真的適用於所有服務
- 更新 `_證書補換發服務_共用架構文件.md`
- 檢查是否需要同步更新專屬文件

**更新服務專屬內容時：**
- 只更新對應的專屬文件
- 不需要擔心影響其他服務

## 關鍵差異對照表

### 001005 vs 001007 主要差異

| 項目           | 001005                         | 001007                         |
| -------------- | ------------------------------ | ------------------------------ |
| 服務名稱       | 醫事人員證書補(換)發           | 專科醫師證書補(換)發           |
| 證書類別欄位   | `DIVISION`                     | `LIC_TYPE`                     |
| 證書類別內容   | 醫事人員類別（醫師、護理師等） | 專科醫師類別（內科、外科等）   |
| 核發單位欄位   | `ISSUE_DEPT`（有）             | 無                             |
| 證書類型欄位   | `LIC_TYPE`（有）               | 無（LIC_TYPE 用於專科類別）    |
| 證書字號預設值 | 依證書類別而定                 | 固定為「專醫」                 |
| 申請對象       | 所有醫事人員                   | 僅限專科醫師                   |
| 核發日期       | 選填                           | 必填                           |
| 補換發原因代碼 | 01=遺失, 02=毀損, 03=變更姓名, 99=其他 | 01=遺失, 02=毀損, 03=污損, 04=變更姓名, 05=其他 |

## 文件清單

### 共用文件

- `_證書補換發服務_共用架構文件.md` (1,245 行)
  - 所有證書補換發服務的共用架構和技術模式

### 服務專屬文件

- `001005_醫事人員證書補換發_專屬.md` (497 行)
  - 001005 服務的專屬特性和差異
  
- `001007_專科醫師證書補換發_專屬.md` (493 行)
  - 001007 服務的專屬特性和差異

### 原始詳細文件（保留供參考）

- `001005_醫事人員證書補換發_詳細.md` (1,886 行)
  - 原始的完整詳細文件
  
- `001007_專科醫師證書補換發_詳細.md` (2,100 行)
  - 原始的完整詳細文件

## 未來規劃

### 短期

1. 為 001036（專科護理師證書補換發）建立專屬文件
2. 為其他證書補換發服務建立專屬文件
3. 收集使用者回饋，優化文件結構

### 中期

1. 建立其他類型服務的共用架構文件（如：申請類、查詢類）
2. 統一所有服務的文件結構
3. 建立文件自動生成工具

### 長期

1. 建立完整的技術文件體系
2. 整合到開發流程中
3. 建立文件版本控管機制

## 常見問題 (FAQ)

### Q1: 為什麼要重構文件？

**A:** 原始的詳細文件包含大量重複內容（約 70-80% 的內容是相同的架構說明），導致：
- 維護困難：修改共用邏輯需要同時更新多份文件
- 閱讀困難：需要閱讀大量重複內容才能找到關鍵差異
- 擴展困難：新增服務需要複製整份文件

### Q2: 原始的詳細文件會被刪除嗎？

**A:** 不會。原始文件會保留供參考，檔名為：
- `001005_醫事人員證書補換發_詳細.md`
- `001007_專科醫師證書補換發_詳細.md`

### Q3: 如何快速找到某個服務的完整資訊？

**A:** 閱讀兩份文件：
1. `_證書補換發服務_共用架構文件.md`（共用架構）
2. `{服務代碼}_{服務名稱}_專屬.md`（服務專屬）

### Q4: 如果我只想了解兩個服務的差異怎麼辦？

**A:** 直接比較兩份專屬文件即可，因為專屬文件只包含差異部分。

### Q5: 共用文件適用於哪些服務？

**A:** 所有證書補(換)發類服務，包括：
- 001005 - 醫事人員證書補(換)發
- 001007 - 專科醫師證書補(換)發
- 001036 - 專科護理師證書補(換)發
- 未來新增的證書補換發服務

### Q6: 如何確保共用文件和專屬文件的一致性？

**A:** 
1. 共用文件使用 `{服務代碼}` 等佔位符，表示需要替換的部分
2. 專屬文件明確標註「參考共用架構文件」的章節
3. 定期檢查和更新文件

## 版本歷史

| 版本 | 日期       | 說明                           | 作者                |
| ---- | ---------- | ------------------------------ | ------------------- |
| 1.0  | 2025-01-13 | 初始版本：重構 001005 和 001007 | AI Technical Writer |

## 聯絡資訊

如有任何問題或建議，請聯絡技術文件維護團隊。

---

**版本：** 1.0
**日期：** 2025-10-20
**作者：** 柏通股份有限公司

# 代碼庫差異修復檢查清單

**版本**: 1.0  
**日期**: 2025-11-20  
**狀態**: 待處理

---

## 🔴 緊急任務 (1-3 天內完成)

### 1. Resource Area 模組調查與修復

#### 📍 **已確認的舊版位置**:

- `CodeBase/109_e-service/ES/Areas/Resource/`
- `CodeBase/trunk_DISK_trunk/trunk/Areas/Resource/`

#### 📍 **新版應該在的位置**:

- `CodeBaseNew/e-service/ES/Areas/Resource/` ❌ (目前不存在)

---

- [ ] **步驟 1**: 確認 Resource Area 的完整功能清單（已完成）

  - [x] DBController.cs - 線上 SQL 查詢/執行工具
  - [x] FileController.cs - 伺服器端檔案管理工具
  - [x] DT1Controller.cs - DT1 資源管理
  - [x] BaseController.cs - 安全驗證機制
  - [x] Views/DB/Index.cshtml - SQL 執行介面
  - [x] Views/File/ - 檔案管理介面
  - [x] ResourceAreaRegistration.cs - 路由註冊

- [ ] **步驟 2**: 確認是否刻意移除

  - [ ] 查看專案需求文件
  - [ ] 詢問專案負責人/架構師
  - [ ] 確認生產環境是否使用此功能
  - [ ] 檢查是否有安全考量
  - [ ] 記錄決策結果: ******\_\_\_******

- [ ] **步驟 3**: 在新版代碼庫中搜索替代功能

  - [ ] 搜索 "DBController" 是否有其他實現
  - [ ] 搜索 "FileController" 是否有其他實現
  - [ ] 檢查 BACKMIN Area 是否包含類似功能
  - [ ] 檢查主 Controllers 目錄
  - [ ] 記錄搜索結果: ******\_\_\_******

- [ ] **步驟 4**: 確定修復方案

  - [ ] 方案 A: 功能已遷移 → 更新文檔說明遷移位置
  - [ ] 方案 B: 功能缺失且需要 → 從舊版複製 Resource Area
  - [ ] 方案 C: 功能不再需要 → 記錄移除原因並歸檔
  - [ ] 選擇的方案: ******\_\_\_******

- [ ] **步驟 5**: 執行修復（如選擇方案 B）

  - [ ] 5.1 複製整個 Resource 目錄
    ```
    來源: CodeBase/109_e-service/ES/Areas/Resource/
    目標: CodeBaseNew/e-service/ES/Areas/Resource/
    ```
  - [ ] 5.2 更新專案文件
    - [ ] 在 ES.csproj 中加入所有 Resource Area 文件
    - [ ] 確認 ResourceAreaRegistration.cs 會被載入
  - [ ] 5.3 檢查並更新命名空間
    - [ ] 檢查是否需要從 EUSERVICE 改為 ES
    - [ ] 更新所有 using 語句
    - [ ] 更新 namespace 宣告
  - [ ] 5.4 更新安全設定
    - [ ] 修改預設驗證碼（不使用 turbo@13141806）
    - [ ] 設定 IP 白名單（如需要）
    - [ ] 加入操作日誌記錄

- [ ] **步驟 6**: 測試驗證

  - [ ] 6.1 編譯測試
    - [ ] 專案編譯成功，無錯誤
    - [ ] 無警告訊息（或記錄可接受的警告）
  - [ ] 6.2 路由測試
    - [ ] 訪問 `/Resource/DB` 可正常顯示
    - [ ] 訪問 `/Resource/File` 可正常顯示
    - [ ] 非授權訪問返回 404
  - [ ] 6.3 功能測試
    - [ ] DBController: 執行 SELECT 查詢成功
    - [ ] DBController: 執行 UPDATE 異動成功（測試環境）
    - [ ] DBController: 連線切換功能正常
    - [ ] FileController: 上傳檔案成功
    - [ ] FileController: 建立資料夾成功
    - [ ] FileController: 刪除檔案成功
    - [ ] FileController: 下載壓縮檔成功
  - [ ] 6.4 安全測試
    - [ ] 未驗證訪問被阻擋
    - [ ] 非 localhost 訪問需要驗證
    - [ ] 驗證碼機制正常運作
    - [ ] Session 驗證機制正常

- [ ] **步驟 7**: 環境部署檢查
  - [ ] 開發環境: 啟用 Resource Area
  - [ ] 測試環境: 啟用 Resource Area
  - [ ] 生產環境: 決定是否啟用 ******\_\_\_******
  - [ ] 更新部署文檔

**負責人**: ******\_\_\_******
**開始日期**: ******\_\_\_******
**完成日期**: ******\_\_\_******
**決策記錄**: ******\_\_\_******

---

### 2. 補回關鍵配置文件

- [ ] **Web.Debug.config**

  - [ ] 從舊版複製文件
  - [ ] 檢查配置轉換語法
  - [ ] 測試 Debug 模式部署

- [ ] **Web.Release.config**

  - [ ] 從舊版複製文件
  - [ ] 檢查配置轉換語法
  - [ ] 測試 Release 模式部署

- [ ] **Web-2021-rc1.config** (如果仍需要)
  - [ ] 確認是否仍在使用
  - [ ] 如需要則從舊版複製
  - [ ] 更新相關部署腳本

**負責人**: ******\_\_\_******  
**完成日期**: ******\_\_\_******

---

## 🟡 重要任務 (1-2 週內完成)

### 3. 前端兼容性測試

- [ ] **jQuery 3.7.1 兼容性測試**

  - [ ] 測試所有表單驗證功能
  - [ ] 測試 AJAX 調用
  - [ ] 測試動態 DOM 操作
  - [ ] 測試事件處理
  - [ ] 記錄並修復不兼容問題

- [ ] **jQuery UI 1.13.2 兼容性測試**

  - [ ] 測試日期選擇器
  - [ ] 測試對話框
  - [ ] 測試拖放功能
  - [ ] 測試自動完成
  - [ ] 記錄並修復不兼容問題

- [ ] **Bootstrap 4/5 兼容性測試**

  - [ ] 測試網格系統
  - [ ] 測試模態框
  - [ ] 測試下拉菜單
  - [ ] 測試表單樣式
  - [ ] 測試響應式佈局
  - [ ] 記錄並修復不兼容問題

- [ ] **瀏覽器兼容性測試**
  - [ ] Chrome 最新版
  - [ ] Firefox 最新版
  - [ ] Edge 最新版
  - [ ] Safari (如適用)
  - [ ] IE11 (如仍需支持)

**負責人**: ******\_\_\_******  
**完成日期**: ******\_\_\_******

---

### 4. 補回缺失的 Helper

- [ ] **DatePickerExtension.cs**

  - [ ] 從舊版複製文件
  - [ ] 檢查依賴項
  - [ ] 更新命名空間 (如需要)
  - [ ] 編譯測試
  - [ ] 功能測試

- [ ] **測試日期選擇功能**
  - [ ] 測試西元年份選擇
  - [ ] 測試民國年份選擇
  - [ ] 測試日期格式化
  - [ ] 測試日期驗證
  - [ ] 測試所有使用日期選擇器的表單

**負責人**: ******\_\_\_******  
**完成日期**: ******\_\_\_******

---

### 5. 資源文件檢查

- [ ] **檢查缺失圖片的使用情況**

  - [ ] 搜索 `3d-Icon-ecommercia-011.png` 引用
  - [ ] 搜索 `3d-Icon-ecommercia-02.png` 引用
  - [ ] 搜索 `banner-20210108-a.jpg` 引用
  - [ ] 搜索 `favicon2.ico` 引用

- [ ] **補回仍在使用的資源**

  - [ ] 從舊版複製仍在使用的圖片
  - [ ] 驗證圖片顯示正常

- [ ] **清理不再使用的引用**

  - [ ] 移除過時的圖片引用
  - [ ] 更新相關代碼

- [ ] **檢查 fonts 目錄**

  - [ ] 確認字體文件位置 (根目錄 fonts/ vs Content/fonts/)
  - [ ] 測試字體載入
  - [ ] 如需要則複製缺失的字體文件

- [ ] **檢查 aspnet_client 目錄**
  - [ ] 確認是否仍需要
  - [ ] 如需要則從舊版複製

**負責人**: ******\_\_\_******  
**完成日期**: ******\_\_\_******

---

## 🟢 一般任務 (1 個月內完成)

### 6. 代碼庫清理

- [ ] **版本控制優化**

  - [ ] 創建或更新 .gitignore
  - [ ] 添加 `obj/` 到 .gitignore
  - [ ] 添加 `bin/` 到 .gitignore (如未添加)
  - [ ] 添加 `*.user` 到 .gitignore
  - [ ] 移除已提交的編譯產物

- [ ] **代碼格式統一**

  - [ ] 檢查代碼縮進
  - [ ] 統一換行符 (CRLF vs LF)
  - [ ] 移除多餘的空白行

- [ ] **依賴項檢查**
  - [ ] 檢查 packages.config
  - [ ] 移除未使用的 NuGet 包
  - [ ] 更新過時的依賴項 (謹慎處理)

**負責人**: ******\_\_\_******  
**完成日期**: ******\_\_\_******

---

### 7. 文檔更新

- [ ] **部署文檔**

  - [ ] 更新環境配置說明
  - [ ] 記錄配置轉換步驟
  - [ ] 更新依賴項清單

- [ ] **版本差異文檔**

  - [ ] 記錄所有已修復的差異
  - [ ] 記錄仍存在的差異 (如有)
  - [ ] 記錄版本升級注意事項

- [ ] **開發指南**
  - [ ] 更新前端庫版本說明
  - [ ] 更新開發環境設置
  - [ ] 添加常見問題解答

**負責人**: ******\_\_\_******  
**完成日期**: ******\_\_\_******

---

## 進度追蹤

| 任務編號 | 任務名稱           | 優先級  | 狀態      | 負責人 | 完成日期 |
| -------- | ------------------ | ------- | --------- | ------ | -------- |
| 1        | Resource Area 調查 | 🔴 緊急 | ⬜ 待處理 |        |          |
| 2        | 補回配置文件       | 🔴 緊急 | ⬜ 待處理 |        |          |
| 3        | 前端兼容性測試     | 🟡 重要 | ⬜ 待處理 |        |          |
| 4        | 補回 Helper        | 🟡 重要 | ⬜ 待處理 |        |          |
| 5        | 資源文件檢查       | 🟡 重要 | ⬜ 待處理 |        |          |
| 6        | 代碼庫清理         | 🟢 一般 | ⬜ 待處理 |        |          |
| 7        | 文檔更新           | 🟢 一般 | ⬜ 待處理 |        |          |

**狀態圖例**:

- ⬜ 待處理
- 🔄 進行中
- ✅ 已完成
- ⚠️ 受阻

---

## 備註

請在完成每個任務後更新此檢查清單，並記錄任何發現的問題或額外的工作項目。

**最後更新**: ******\_\_\_******  
**更新人**: ******\_\_\_******

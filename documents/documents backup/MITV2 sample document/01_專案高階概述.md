# MIT 微笑標章管理系統 - 專案高階概述

## 專案概述

MIT 微笑標章管理系統（MITAP2024）是一個全端 Web 應用程式，專門用於管理台灣製產品 MIT 微笑標章的申請、審核、核發及管理流程。系統採用現代化的前後端分離架構，提供完整的標章生命週期管理功能。

### 系統主要功能
- **申請案件管理**：處理各類型標章申請案件（A001-A006）
- **廠商資料管理**：維護申請廠商的基本資料與聯絡人資訊
- **產品資料管理**：管理申請產品的詳細資訊與分類
- **審核流程管理**：支援多階段審核流程與權限控制
- **證書管理**：MIT 證書的核發、變更、補發等作業
- **報表產製**：自動產生申請書、證書等各類文件
- **系統管理**：使用者、角色、權限、部門等系統基礎設定

## 專案結構

### 檔案目錄結構

```
MITV2/
├── MITAP2024/                          # 主要專案目錄
│   ├── MITAP2024.Server/               # 後端 API 服務
│   │   ├── Controllers/                # API 控制器（空目錄）
│   │   ├── Models/                     # 資料模型
│   │   │   ├── Mit/                    # MIT 業務相關模型
│   │   │   ├── Sys/                    # 系統管理模型
│   │   │   └── SysSet/                 # 系統設定模型
│   │   ├── Main/                       # 後台管理功能
│   │   │   ├── HOME/                   # 首頁與登入
│   │   │   ├── SYS10/                  # 系統管理（部門、使用者等）
│   │   │   ├── SYS11/                  # 系統設定（角色、權限等）
│   │   │   ├── MIT10/                  # MIT 管理功能
│   │   │   └── MIT04/                  # MIT 其他功能
│   │   ├── MITF/                       # 前台申請功能
│   │   │   ├── HOME/                   # 前台首頁
│   │   │   ├── MIT01/                  # 申請案件管理
│   │   │   ├── MIT02/                  # 憑證簽章
│   │   │   └── MIT03/                  # 查詢功能
│   │   ├── Common/                     # 共用功能
│   │   ├── MITCommon/                  # MIT 共用功能
│   │   ├── Utils/                      # 工具類別
│   │   ├── Migrations/                 # 資料庫遷移檔案
│   │   └── Properties/                 # 專案屬性
│   ├── mitap2024.client/               # 前端 Vue.js 應用
│   │   ├── src/                        # 原始碼
│   │   │   ├── main/                   # 後台管理介面
│   │   │   ├── mitf/                   # 前台申請介面
│   │   │   ├── components/             # 共用元件
│   │   │   ├── composables/            # Vue 組合式函數
│   │   │   ├── router/                 # 路由設定
│   │   │   └── assets/                 # 靜態資源
│   │   ├── public/                     # 公開資源
│   │   └── dist/                       # 建置輸出
│   ├── documents/                      # 文件與程式碼範本
│   ├── resource/                       # 資源檔案
│   ├── tools/                          # 開發工具
│   └── 轉檔SQL/                        # 資料庫轉檔腳本
├── ConsoleTestApp/                     # 測試控制台應用程式
└── MITAP_2024.sln                      # Visual Studio 解決方案檔
```

### 重要檔案說明

#### 核心配置文件
- **appsettings.json**：應用程式設定檔，包含資料庫連線、Redis 設定等
- **Program.cs**：應用程式進入點，設定服務與中介軟體
- **MainDbContext.cs**：Entity Framework 資料庫上下文
- **package.json**：前端套件相依性設定
- **vite.config.ts**：前端建置工具設定

#### 功能模組
- **Controllers**：API 控制器，處理 HTTP 請求
- **Services**：業務邏輯服務層
- **Models**：資料模型與 ViewModel
- **Vue Components**：前端 UI 元件
- **Composables**：Vue 組合式函數，封裝可重用邏輯

### 使用的主要套件

#### 後端技術棧
- **.NET 9.0**：主要開發框架
- **ASP.NET Core Web API**：Web API 框架
- **Entity Framework Core**：ORM 資料存取框架
- **SQL Server**：主要資料庫
- **Redis**：快取與 Session 管理
- **log4net**：日誌記錄
- **iTextSharp**：PDF 文件產生
- **DocumentFormat.OpenXml**：Office 文件處理
- **LibreOffice**：文件格式轉換

#### 前端技術棧
- **Vue.js 3.4**：前端框架
- **TypeScript**：程式語言
- **Vue Router 4.2**：路由管理
- **Vite 5.0**：建置工具
- **Bootstrap 5.3**：UI 框架
- **FontAwesome**：圖示庫
- **Quill Editor**：富文本編輯器
- **Vue Datepicker**：日期選擇器

### 開發環境需求

#### 前端開發環境
- **Node.js**：v21.7.3 或更高版本
- **npm**：套件管理工具
- **現代瀏覽器**：支援 ES2020+ 的瀏覽器

#### 後端開發環境
- **.NET SDK**：9.0 或更高版本
- **Visual Studio 2022**：建議使用 17.8 或更高版本
- **SQL Server**：2019 或更高版本
- **Redis Server**：7.2 或更高版本

#### 資料庫環境
- **SQL Server**：主要資料庫，儲存業務資料
- **Redis**：快取資料庫，用於 Session 管理與快取

#### 報表環境需求
- **LibreOffice**：用於文件格式轉換（DOC/DOCX 轉 PDF）
- **iTextSharp**：PDF 文件產生與處理
- **DocumentFormat.OpenXml**：Excel 文件處理

### 部署注意事項

#### 前端部署
1. 執行 `npm run build` 建置前端應用
2. 建置結果會整合到後端專案的 `wwwroot` 目錄
3. 前端採用 SPA 模式，需要設定適當的路由重寫規則

#### 後端部署
1. 確保目標伺服器已安裝 .NET 9.0 Runtime
2. 設定正確的資料庫連線字串
3. 確保 Redis 服務正常運行
4. 安裝 LibreOffice 並設定正確路徑
5. 設定適當的檔案存取權限

#### 資料庫部署
1. 執行 Entity Framework 遷移腳本
2. 確保資料庫使用者具有適當權限
3. 設定資料庫備份策略

#### 安全性設定
1. 設定 HTTPS 憑證
2. 配置適當的 CORS 政策
3. 設定 Content Security Policy
4. 確保敏感資訊不會暴露在設定檔中

#### 效能優化
1. 設定 Redis 快取策略
2. 配置適當的連線池大小
3. 啟用 Response Compression
4. 設定靜態檔案快取策略

## 系統架構特色

### 前後端分離架構
- 前端使用 Vue.js 3 + TypeScript 開發
- 後端提供 RESTful API 服務
- 透過 JWT Token 進行身份驗證

### 模組化設計
- 業務功能按模組劃分（SYS、MIT、MITF）
- 每個模組包含完整的 MVC 結構
- 共用功能抽取為獨立模組

### 多租戶支援
- 支援後台管理（Main）與前台申請（MITF）兩套介面
- 不同使用者角色具有不同的功能權限
- 靈活的權限控制機制

### 文件處理能力
- 支援多種文件格式轉換
- 自動產生 PDF 報表
- 整合 LibreOffice 進行文件處理

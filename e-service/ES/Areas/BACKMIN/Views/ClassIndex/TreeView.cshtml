@model ES.Areas.Admin.Models.ClassPageModel
@{
    Layout = "~/Areas/BACKMIN/Views/Shared/_Layout.cshtml";

    ViewBag.Title = "分類檢索管理";
    ViewBag.FunctionTitle = "分類檢索管理";
    ViewBag.Script = @"
";
}
<script type="text/javascript">
    var zNodes = @Html.Raw(ViewBag.Json);
</script>
<script src="../../Scripts/jquery.ztree.exedit-3.5.min.js" type="text/javascript"></script>
<script type="text/javascript" src="../../Scripts/View/TreeView.js"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<div class="bread">
    <i class="fas fa-home"></i>首頁 / 帳號管理 / @ViewBag.FunctionTitle
</div>
<div class="col-sm-12 content">
    <h1 class="main-title"><i class="fas fa-edit"></i>@ViewBag.FunctionTitle</h1>
    <div class="form-blue form-horizontal">
        <table>
            <tr>
                <td colspan="2">
                    @*<a href="#" id="addParent">增加父結點</a>｜ *@
                    <a href="#" id="addLeaf" class="btn btn-save">增加子結點</a>｜ <a href="#"
                                                                                id="edit" class="btn btn-save">編輯結點</a>｜ <a href="#" class="btn btn-warning" id="remove">刪除結點</a>
                </td>
            </tr>
            <tr>
                <td rowspan="2">
                    <div id="treediv" style="height: 500px; width: 300px; overflow: auto;" onscroll="document.getElementById('scollBarPostion').value = this.scrollTop;">
                        <ul id="treeDemo" class="ztree"></ul>
                        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
                        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
                    </div>
                </td>
                <td valign="top">
                    @using (Html.BeginForm("TreeView_EDIT", "ClassIndex", FormMethod.Post, new { id = "ActionForm" }))
                    {
                        @Html.AntiForgeryToken()
                        @Html.ValidationSummary(true)
                        <table id="edittable" style="display: none; margin-left:20px;">
                            <tr>
                                <th colspan="2">
                                    <span id="title"></span>
                                    @Html.HiddenFor(m => m.ActionModel)
                                    @*<input type="hidden" id="ActModel" name="ActModel" value="" />*@
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    上層分類名稱：
                                </td>
                                <td>
                                    <span id="parentName"></span>
                                    @Html.HiddenFor(m => m.TargetTable)
                                    @Html.HiddenFor(m => m.ParentClassid)
                                    @Html.HiddenFor(m => m.BeforeClassid)
                                    @Html.HiddenFor(m => m.Clevel)
                                    @Html.HiddenFor(m => m.scollBarPostion)
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    @Html.LabelFor(m => m.Classid)
                                </td>
                                <td>
                                    @Html.TextBoxFor(m => m.Classid, new { maxlength = "4", @class = "form-normal" })
                                    @Html.ValidationMessageFor(m => m.Classid)
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    @Html.LabelFor(m => m.Classname)
                                </td>
                                <td>
                                    @Html.TextBoxFor(m => m.Classname, new { maxlength = "50", @class = "form-normal" })
                                    @Html.ValidationMessageFor(m => m.Classname)
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <input type="submit" id="Send" value="確定" class="btn btn-save" />
                                    <input type="button" value="取消" class="btn btn-gray" onclick="$('#edittable').hide();" />
                                </td>
                            </tr>
                        </table>
                    }
                </td>
            </tr>
        </table>
    </div>
</div>
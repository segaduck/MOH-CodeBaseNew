@model ES.Models.MemberForgetModel
@{
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    ViewBag.Title = "忘記密碼";
}

@using (Html.BeginForm("Forget", "Login"))
{
    <div class="container-fluid">
        <!--bread -->
        <div class="col-sm-12">
            <div class="breadlink"><i class="fas fa-home"></i><a href="@(Url.Action("Index", "Login"))">首頁</a> > <a href="#">@Html.Raw(ViewBag.Title)</a></div>
        </div>
        <div class="clearfix"></div>
        <!--form-->
        <h3 class="note-title note-titlebar-blue">忘記密碼</h3>
        <div class="form-set">
            <!-- second-title -->
            <h2 class="second-title">忘記密碼</h2>
            <div class="form-group">
                <label class="step-label col-sm-2" for=""><span style="color:red;">*(必填)</span>@Html.DisplayNameFor(m => m.Account)</label>
                <div class="col-sm-10">
                    @Html.TextBoxFor(m => m.Account, new { @class = "form-normal form-40"})
                    @Html.ValidationMessageFor(m => m.Account)
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="form-group">
                <label class="step-label col-sm-2" for=""><span style="color:red;">*(必填)</span>@Html.DisplayNameFor(m => m.Identity)</label>
                <div class="col-sm-10">
                    @Html.TextBoxFor(m => m.Identity, new { @class = "form-normal form-40"})
                    @Html.ValidationMessageFor(m => m.Identity)
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="form-group">
                <label class="step-label col-sm-2" for=""><span style="color:red;">*(必填)</span>@Html.DisplayNameFor(m => m.Mail)</label>
                <div class="col-sm-10">
                    @Html.TextBoxFor(m => m.Mail, new { @class = "form-normal form-40" })
                    @Html.ValidationMessageFor(m => m.Mail)
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="form-group">
                <label class="step-label col-sm-2" for="code"><span style="color:red;">*(必填)</span>@Html.DisplayNameFor(m => m.ValidateCode)</label>
                <div class="col-sm-10">
                    @Html.TextBoxFor(m => m.ValidateCode, new { @class = "form-normal  form-40", placeholder = "請輸入驗證碼", maxlength = "10" })
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <img src="@Url.Action("GetValidateCode", "Login")" id="imgChgNum1" alt="產生新驗證碼" title="產生新驗證碼" />
                    <a href="#" class="btn" id="imgChgNum2"><i class="fas fa-sync-alt"></i></a>
                    @*<span style="color:red">點擊圖片可更換驗證碼</span>*@
                    <noscript> 不支援javascript時，請按鍵盤上的F5鍵以重新產生驗證碼。 </noscript>
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="btn-bar text-center">
                <input class="btn btn-save" type="submit" value="取得新密碼" />
            </div>
        </div>
    </div>
}
<script type="text/javascript">

    function reloadValidCode() {
        if ($('#imgChgNum1').length) { blockUI(); } else { unblockUI(); }
        $('#imgChgNum1').attr("src", '@Url.Action("GetValidateCode", "Login")' + "?rand=" + new Date().getMilliseconds());
    }
    $(function () {
        $('#imgChgNum1').on("click", function (e) {
            reloadValidCode();
        });
        $('#imgChgNum2').on("click", function (e) {
            reloadValidCode();
        });
        $('#imgChgNum1').on("load", function () {
            unblockUI();
        });
        $('#imgChgNum2').on("load", function () {
            unblockUI();
        });
    });
</script>
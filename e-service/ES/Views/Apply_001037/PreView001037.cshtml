@using ES.Models.Entities
@using ES.Models
@using ES.Commons;
@model ES.Models.ViewModels.Apply_001037ViewModel

@{Layout = null; }

<div class="col-sm-12">

    <div class="row">
        <div class="col-sm-12">
            <h1 class="form-title title-bg-y">申辦表件預覽</h1>
            <div class="form-set">
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">申辦項目</label>
                    <div class="col-sm-10">
                        <p class="form-control-static">醫事人員或公共衛生師請領無懲戒紀錄證明申請書</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">申辦日期</label>
                    <div class="col-sm-4">
                        <p class="form-control-static">@Model.APPLY_DATE</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">申請人中文姓名</label>
                    <div class="col-sm-4">
                        <p class="form-control-static">@Model.APPLY_NAME</p>
                    </div>
                    <label class="step-label col-sm-2" for="">身分證編號/居留證號</label>
                    <div class="col-sm-4">
                        <p class="form-control-static">@Model.APPLY_PID</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">申請人英文姓名</label>
                    <div class="col-sm-4">
                        <p class="form-control-static">@Model.Apply.ENAME</p>
                    </div>
                    <label class="step-label col-sm-2" for="">申請人英文別名</label>
                    <div class="col-sm-4">
                        <p class="form-control-static">@Model.Apply.E_ALIAS_NAME</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">承辦單位</label>
                    <div class="col-sm-10">
                        <p class="form-control-static">衛生福利部醫事司</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">通訊地址</label>
                    <div class="col-sm-10">
                        <p class="form-control-static">@Model.FULL_ADDRESS</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">電話</label>
                    <div class="col-sm-10">
                        <p class="form-control-static">@Model.TEL</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">行動電話</label>
                    <div class="col-sm-4">
                        <p class="form-control-static">@Model.MOBILE</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">E-MAIL</label>
                    <div class="col-sm-10">
                        <p class="form-control-static">@Model.MAIL</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">醫事人員或公共衛生師證書字號</label>
                    <div class="col-sm-10">
                        <p class="form-control-static">@Model.DIVISION_TEXT @Model.LIC_CD_TEXT 字第 @Model.LIC_NUM 號</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">證書發給日期</label>
                    <div class="col-sm-10">
                        <p class="form-control-static">@Html.BLATYPForTurbo(x => x.ISSUE_DATE_AC, HelperUtil.DateTimeToTwString(Convert.ToDateTime(Model.ISSUE_DATE_AC)))</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">申請份數</label>
                    <div class="col-sm-4">
                        <p class="form-control-static">@Model.COPIES</p>
                    </div>
                    <label class="step-label col-sm-2" for="">金額 (NTD)</label>
                    <div class="col-sm-4">
                        <p class="form-control-static">@Model.TOTAL</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="step-label col-sm-2" for="">本證明書郵寄地址</label>
                    <div class="col-sm-10">
                        <p class="form-control-static">收件者 @Model.MAIL_REC @Model.MAIL_FULL_ADDRESS @Model.COUNTRY_TEXT</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class='step-label col-sm-2' for="">申請理由</label>
                    <div class='col-sm-10'>
                        <p class="form-control-static">@Model.REASON_1_TEXT</p>
                    </div>
                </div>
                @if (Model.REASON_1 == "1")
                {
                    <div class="form-group" id='ReasonGroup1_1' style="">
                        <label class='step-label col-sm-2' for="">出國使用</label>
                        <div class='col-sm-10'>
                            <p class="form-control-static">@Model.REASON_2_TEXT @Model.REASON_2_DESC</p>
                        </div>
                    </div>
                    <div class="form-group" id='ReasonGroup1_2' style="">
                        <label class='step-label col-sm-2' for="">前往國家</label>
                        <div class='col-sm-10'>
                            <p class="form-control-static">@Model.REASON_3_TEXT @Model.REASON_3_DESC</p>
                        </div>
                    </div>
                }
                else
                {
                    <div class="form-group" id='ReasonGroup2_1' style="display:none;">
                        <label class='step-label col-sm-2' for="">國內使用</label>
                        <div class='col-sm-10'>
                            @if (Model.REASON_4 != "")
                            {
                                <p class="form-control-static">@Model.REASON_4_TEXT @Model.REASON_4_DESC</p>
                            }
                            else
                            {
                                <p class="form-control-static">@Model.REASON_5_TEXT @Model.REASON_5_DESC</p>
                            }

                        </div>
                    </div>
                }

            </div>
        </div>
        <div class="col-sm-12">
            <h1 class="form-title title-bg-y">上傳附件預覽</h1>
            <div class="form-set">
                <div class='form-group'>
                    <label class='step-label col-sm-2' for=''>護照影本電子檔</label>
                    <div class="col-sm-10">
                        @Html.ImageHoverForTurbo(x => x.FILE1, Model.FILE1_NAME)
                    </div>
                </div>
                <div class='form-group'>
                    <label class='step-label col-sm-2' for=''>醫事人員或公共衛生師中文證書電子檔</label>
                    <div class="col-sm-10">
                        @Html.ImageHoverForTurbo(x => x.FILE2, Model.FILE2_NAME)
                    </div>
                </div>
                <div class='form-group'>
                    <label class='step-label col-sm-2' for=''>繳費紀錄照片或pdf檔案</label>
                    <div class="col-sm-10">
                        @Html.ImageHoverForTurbo(x => x.FILE3, Model.FILE3_NAME)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="form-set">
        <div class="btn-bar text-center">
            <button type="button" class="btn btn-save" onclick="doSave()">確認送出</button>
            <button type="button" class="btn btn-clear" onclick="doApply()">返回修改</button>
        </div>

    </div>
</div>

<script type="text/javascript">

    $(document).ready(function () {
        $('[data-hover!=\"\"]').hover();
    });

    function doApply()
    {
        $('#PreView_Tab').removeClass('active');
        $('#PreViewForm').attr('class', 'tab-pane fade');

        $('#Apply_Tab').attr('class', 'active');
        $('#ApplyForm').attr('class', 'tab-pane fade active in');

    }

    function doSave() {

            var data = getFormDataToObject($("form[id=main_form]"));
            ajaxLoadMore('@Url.Action("ApplyAjax")', data, function (retData) {
                if (retData.status) {
                    ajaxLoadMore('@Url.Action("Pay")', data, function (getHtml) {
                        $('#PreView_Tab').removeClass('active');
                        $('#PreViewForm').attr('class', 'tab-pane fade');

                        $('#Pay_Tab').attr('class', 'active');
                        $('#PayForm').attr('class', 'tab-pane fade active in');

                        $("#PayForm").html(getHtml);

                    });
                }
                else {
                    blockAlert(retData.message, "提示訊息");
                }
            });
    }
</script>

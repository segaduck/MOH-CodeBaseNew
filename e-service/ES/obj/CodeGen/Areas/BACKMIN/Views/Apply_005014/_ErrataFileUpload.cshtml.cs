#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     這段程式碼是由工具產生的。
//     執行階段版本:4.0.30319.42000
//
//     對這個檔案所做的變更可能會造成錯誤的行為，而且如果重新產生程式碼，
//     變更將會遺失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ES.Areas.BACKMIN.Views.Apply_005014
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using ES.Helpers;
    
    #line 3 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
    using ES.Models.Entities;
    
    #line default
    #line hidden
    
    #line 2 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
    using ES.Utils;
    
    #line default
    #line hidden
    using JQueryUIHelpers;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/BACKMIN/Views/Apply_005014/_ErrataFileUpload.cshtml")]
    public partial class ErrataFileUpload : System.Web.Mvc.WebViewPage<ES.Areas.BACKMIN.Models.Apply_005014ViewModel>
    {

#line 141 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
public System.Web.WebPages.HelperResult RenderDownloadField(string filename)
{
#line default
#line hidden
return new System.Web.WebPages.HelperResult(__razor_helper_writer => {

#line 142 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
 
    bool isImg = true;
    bool isPdf = true;
    if (!string.IsNullOrEmpty(filename))
    {
        var fileExt = Path.GetExtension(filename);
        string shortFilename = Path.GetFileName(filename);
        byte[] ba = System.Text.Encoding.UTF8.GetBytes(filename); ;
        string base64filename = Convert.ToBase64String(ba);
        string urlAttch = Url.Action("DownloadFileFromPath", "File", new { area = "", filepath = base64filename });
        string urlInline = Url.Action("DownloadFileFromPath", "File", new { area = "", filepath = base64filename, downloadtype = "inline" });

        switch (fileExt)
        {
            case ".jpg":
            case ".jpeg":
            case ".bmp":
            case ".png":
            case ".gif":
                isImg = true;
                isPdf = false;
                break;
            case ".pdf":
                isImg = false;
                isPdf = true;
                break;
            default:
                isImg = false;
                isPdf = false;
                break;
        }

        if (isImg)
        {


#line default
#line hidden
WriteLiteralTo(__razor_helper_writer, "            <a");

WriteAttributeTo(__razor_helper_writer, "href", Tuple.Create(" href=\"", 6239), Tuple.Create("\"", 6255)

#line 176 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 6246), Tuple.Create<System.Object, System.Int32>(urlAttch

#line default
#line hidden
, 6246), false)
);

WriteLiteralTo(__razor_helper_writer, " class=\"\"");

WriteLiteralTo(__razor_helper_writer, " download>");


#line 176 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                    WriteTo(__razor_helper_writer, shortFilename);


#line default
#line hidden
WriteLiteralTo(__razor_helper_writer, "</a>\r\n");

WriteLiteralTo(__razor_helper_writer, "            <a");

WriteAttributeTo(__razor_helper_writer, "href", Tuple.Create(" href=\"", 6309), Tuple.Create("\"", 6326)

#line 177 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 6316), Tuple.Create<System.Object, System.Int32>(urlInline

#line default
#line hidden
, 6316), false)
);

WriteLiteralTo(__razor_helper_writer, " target=\"_blank\"");

WriteLiteralTo(__razor_helper_writer, ">\r\n                <img");

WriteAttributeTo(__razor_helper_writer, "src", Tuple.Create(" src=\"", 6366), Tuple.Create("\"", 6382)

#line 178 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 6372), Tuple.Create<System.Object, System.Int32>(urlInline

#line default
#line hidden
, 6372), false)
);

WriteLiteralTo(__razor_helper_writer, " style=\"width:100px\"");

WriteLiteralTo(__razor_helper_writer, " />\r\n            </a>\r\n");


#line 180 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
        }
        else if (isPdf)
        {


#line default
#line hidden
WriteLiteralTo(__razor_helper_writer, "            <div");

WriteLiteralTo(__razor_helper_writer, " class=\"form-control-static\"");

WriteLiteralTo(__razor_helper_writer, ">\r\n                <a");

WriteAttributeTo(__razor_helper_writer, "href", Tuple.Create(" href=\"", 6538), Tuple.Create("\"", 6554)

#line 184 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 6545), Tuple.Create<System.Object, System.Int32>(urlAttch

#line default
#line hidden
, 6545), false)
);

WriteLiteralTo(__razor_helper_writer, " class=\"form-control-static\"");

WriteLiteralTo(__razor_helper_writer, " download>");


#line 184 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                                           WriteTo(__razor_helper_writer, shortFilename);


#line default
#line hidden
WriteLiteralTo(__razor_helper_writer, "</a>\r\n                <a");

WriteAttributeTo(__razor_helper_writer, "href", Tuple.Create(" href=\"", 6631), Tuple.Create("\"", 6648)

#line 185 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 6638), Tuple.Create<System.Object, System.Int32>(urlInline

#line default
#line hidden
, 6638), false)
);

WriteLiteralTo(__razor_helper_writer, " class=\"btn btn-default\"");

WriteLiteralTo(__razor_helper_writer, " target=\"_blank\"");

WriteLiteralTo(__razor_helper_writer, ">預覽</a>\r\n            </div>\r\n");


#line 187 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
        }
        else
        {
            if (shortFilename == "__NONE__")
            {


#line default
#line hidden
WriteLiteralTo(__razor_helper_writer, "                <div");

WriteLiteralTo(__razor_helper_writer, " class=\"form-control-static\"");

WriteLiteralTo(__razor_helper_writer, "> (未上傳檔案) </div>\r\n");


#line 193 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
            }
            else
            {


#line default
#line hidden
WriteLiteralTo(__razor_helper_writer, "                <div");

WriteLiteralTo(__razor_helper_writer, " class=\"form-control-static\"");

WriteLiteralTo(__razor_helper_writer, ">\r\n                    <a");

WriteAttributeTo(__razor_helper_writer, "href", Tuple.Create(" href=\"", 7002), Tuple.Create("\"", 7018)

#line 197 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 7009), Tuple.Create<System.Object, System.Int32>(urlAttch

#line default
#line hidden
, 7009), false)
);

WriteLiteralTo(__razor_helper_writer, " class=\"form-control-static\"");

WriteLiteralTo(__razor_helper_writer, " target=\"_blank\"");

WriteLiteralTo(__razor_helper_writer, " download>");


#line 197 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                                                               WriteTo(__razor_helper_writer, shortFilename);


#line default
#line hidden
WriteLiteralTo(__razor_helper_writer, "</a>\r\n                </div>\r\n");


#line 199 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
            }
        }
    }


#line default
#line hidden
});

#line 202 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
}
#line default
#line hidden

        public ErrataFileUpload()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n");

            
            #line 5 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
  
    ViewBag.Title = "_ErrataFileUpload";
    // 檔案上傳

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n<div");

WriteLiteral(" class=\"form-blue\"");

WriteLiteral(" id=\"file-grid\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"form-group\"");

WriteLiteral(">\r\n        <label");

WriteLiteral(" class=\"main-label col-sm-2\"");

WriteLiteral(">佐證文件採合併檔案</label>\r\n        <div");

WriteLiteral(" class=\"col-sm-10\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"form-control-static\"");

WriteLiteral(">\r\n                ");

WriteLiteral("\r\n");

WriteLiteral("                ");

            
            #line 16 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
           Write(Html.RadioButtonFor(x => x.Detail.IS_MERGE_FILE, "Y"));

            
            #line default
            #line hidden
WriteLiteral(" 是\r\n                ");

WriteLiteral("\r\n");

WriteLiteral("                ");

            
            #line 18 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
           Write(Html.RadioButtonFor(x => x.Detail.IS_MERGE_FILE, "N"));

            
            #line default
            #line hidden
WriteLiteral(" 否\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n");

            
            #line 23 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
    
            
            #line default
            #line hidden
            
            #line 23 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
      
        if (Model.FileList == null || Model.FileList.Count == 0)
        {
            Model.FileList.Add(new Apply_005014_FILExt { FILE_NAME = "(未上傳檔案)" });
        }

    
            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n");

            
            #line 31 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
    
            
            #line default
            #line hidden
            
            #line 31 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
     for (int i = 0; i < Model.FileList.Count; i++)
    {
        var item = Model.FileList[i];
        Model.ErrataList.Add(new ES.Models.ViewModels.ErrataModel { IsSel = false, Name = "FILE_" + (i + 1).ToString() });


            
            #line default
            #line hidden
WriteLiteral("        <div");

WriteLiteral(" class=\"form-group\"");

WriteLiteral(">\r\n            <label");

WriteLiteral(" class=\"main-label col-sm-2\"");

WriteLiteral(" style=\"padding-top:22px\"");

WriteLiteral(">\r\n");

            
            #line 38 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                
            
            #line default
            #line hidden
            
            #line 38 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                  
                    Dictionary<string, object> dict = new Dictionary<string, object>();
                    dict["v-model"] = Html.Raw(string.Format("errata[{0}]", i));
                    dict["placeholder"] = "補件備註";
                
            
            #line default
            #line hidden
WriteLiteral("\r\n");

WriteLiteral("                ");

            
            #line 43 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
           Write(Html.CheckBoxFor(x => x.ErrataList[i].IsSel, dict));

            
            #line default
            #line hidden
WriteLiteral("\r\n                其他證明文件 ");

            
            #line 44 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                   Write(i + 1);

            
            #line default
            #line hidden
WriteLiteral("\r\n            </label>\r\n            <div");

WriteLiteral(" class=\"col-sm-10\"");

WriteLiteral(">\r\n");

            
            #line 47 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                
            
            #line default
            #line hidden
            
            #line 47 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                  
                    Dictionary<string, object> dict1 = new Dictionary<string, object>();
                    dict1["v-show"] = Html.Raw(string.Format("errata[{0}]", i));
                    dict1["class"] = "form-control";
                    dict1["placeholder"] = "補件備註";
                
            
            #line default
            #line hidden
WriteLiteral("\r\n                <div>\r\n                    <div");

WriteLiteral(" class=\"form-inline\"");

WriteLiteral(">最新檔案: ");

            
            #line 54 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                                              Write(RenderDownloadField(item.FILE_NAME));

            
            #line default
            #line hidden
WriteLiteral(" </div>\r\n");

WriteLiteral("                    ");

            
            #line 55 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
               Write(Html.TextBoxFor(x => Model.FileList[i].FILE_E, dict1));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n");

            
            #line 57 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                
            
            #line default
            #line hidden
            
            #line 57 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                  
                    IList<Apply_005014_FILE_Log> logFileList = Model.FileLogList.Where(x => x.FILE_ID == (i + 1).ToString())
                        .OrderBy(x => x.CREATE_DATE)
                        .ToList();
                
            
            #line default
            #line hidden
WriteLiteral("\r\n");

            
            #line 62 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                
            
            #line default
            #line hidden
            
            #line 62 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                 if (logFileList != null && logFileList.Count > 1)
                {
                    for (int j = logFileList.Count - 2; j >= 0; j--)
                    {
                        var it = logFileList[j];
                        if (j == 0)
                        {

            
            #line default
            #line hidden
WriteLiteral("                            <div");

WriteLiteral(" class=\"form-inline\"");

WriteLiteral(">首次上傳: ");

            
            #line 69 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                                                      Write(RenderDownloadField(it.FILE_NAME));

            
            #line default
            #line hidden
WriteLiteral(" </div>\r\n");

            
            #line 70 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                        }
                        else
                        {

            
            #line default
            #line hidden
WriteLiteral("                            <div");

WriteLiteral(" class=\"form-inline\"");

WriteLiteral(">第 ");

            
            #line 73 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                                                   Write(j);

            
            #line default
            #line hidden
WriteLiteral(" 次補件: ");

            
            #line 73 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                                                            Write(RenderDownloadField(it.FILE_NAME));

            
            #line default
            #line hidden
WriteLiteral(" </div>\r\n");

            
            #line 74 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                        }
                    }
                }

            
            #line default
            #line hidden
WriteLiteral("            </div>\r\n        </div>\r\n");

            
            #line 79 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
    }

            
            #line default
            #line hidden
WriteLiteral("    <div");

WriteLiteral(" class=\"btnbar\"");

WriteLiteral(">\r\n        <button");

WriteLiteral(" type=\"button\"");

WriteLiteral(" class=\"btn btn-blue\"");

WriteAttribute("onclick", Tuple.Create(" onclick=\"", 3290), Tuple.Create("\"", 3332)
, Tuple.Create(Tuple.Create("", 3300), Tuple.Create("doPackage(\'", 3300), true)
            
            #line 81 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 3311), Tuple.Create<System.Object, System.Int32>(Model.Apply.APP_ID
            
            #line default
            #line hidden
, 3311), false)
, Tuple.Create(Tuple.Create("", 3330), Tuple.Create("\')", 3330), true)
);

WriteLiteral(">檔案打包下載</button>\r\n        <button");

WriteLiteral(" type=\"button\"");

WriteLiteral(" class=\"btn btn-blue\"");

WriteLiteral(" onclick=\"preview_print()\"");

WriteLiteral(">套印申請書</button>\r\n        <button");

WriteLiteral(" type=\"button\"");

WriteLiteral(" class=\"btn btn-blue\"");

WriteLiteral(" onclick=\"preview_print2A()\"");

WriteLiteral(">套印一般切結書</button>\r\n        <button");

WriteLiteral(" type=\"button\"");

WriteLiteral(" class=\"btn btn-blue\"");

WriteLiteral(" onclick=\"preview_print2B()\"");

WriteLiteral(">套印萃取物切結書</button>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<script>\r\n    new Vue({\r\n        el" +
": \'#file-grid\',\r\n        name: \'ApplyFileList\',\r\n        data: function () {\r\n  " +
"          return {\r\n                fileCount: parseInt(\'");

            
            #line 96 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                                Write(Model.FileList.Count);

            
            #line default
            #line hidden
WriteLiteral(@"'),
                errata: []
            };
        },
        mounted: function () {
            for (var i = 0; i < this.fileCount; i++) {
                this.errata.push(false);
            }
        }
    });
    //套印申請書
    function preview_print() {
        var data = getFormDataToObject($(""form[id=main_form]""));
        $.fileDownload('");

            
            #line 109 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                   Write(Url.Action("PreviewApplyForm1"));

            
            #line default
            #line hidden
WriteLiteral(@"', {
            httpMethod: 'post',
            data: data,
            prepareCallback: function (url) {

            }
        });
    }
    //套印一般切結書
    function preview_print2A() {
        var data = getFormDataToObject($(""form[id=main_form]""));
        $.fileDownload('");

            
            #line 120 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                   Write(Url.Action("PreviewApplyForm2A"));

            
            #line default
            #line hidden
WriteLiteral(@"', {
            httpMethod: 'post',
            data: data,
            prepareCallback: function (url) {

            }
        });
    }
    //套印萃取物切結書
    function preview_print2B() {
        var data = getFormDataToObject($(""form[id=main_form]""));
        $.fileDownload('");

            
            #line 131 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                   Write(Url.Action("PreviewApplyForm2B"));

            
            #line default
            #line hidden
WriteLiteral("\', {\r\n            httpMethod: \'post\',\r\n            data: data,\r\n            prepa" +
"reCallback: function (url) {\r\n\r\n            }\r\n        });\r\n    }\r\n</script>\r\n\r\n" +
"");

WriteLiteral("\r\n");

            
            #line 204 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
   var url = Html.Raw(Url.Action("GetZIP", "Apply_005014", new { APP_ID = Model.Apply.APP_ID, CASENAME = "005014" })); 
            
            #line default
            #line hidden
WriteLiteral("\r\n<script>\r\n    function doPackage() {\r\n        window.location = \'");

            
            #line 207 "..\..\Areas\BACKMIN\Views\Apply_005014\_ErrataFileUpload.cshtml"
                      Write(url);

            
            #line default
            #line hidden
WriteLiteral("\';\r\n    }\r\n</script>\r\n\r\n");

        }
    }
}
#pragma warning restore 1591

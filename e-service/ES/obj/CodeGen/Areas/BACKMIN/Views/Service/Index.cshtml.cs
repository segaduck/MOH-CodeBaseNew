#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     這段程式碼是由工具產生的。
//     執行階段版本:4.0.30319.42000
//
//     對這個檔案所做的變更可能會造成錯誤的行為，而且如果重新產生程式碼，
//     變更將會遺失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ES.Areas.BACKMIN.Views.Service
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using ES.Helpers;
    using JQueryUIHelpers;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/BACKMIN/Views/Service/Index.cshtml")]
    public partial class Index : System.Web.Mvc.WebViewPage<dynamic>
    {
        public Index()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\BACKMIN\Views\Service\Index.cshtml"
  
    Layout = "~/Areas/BACKMIN/Views/Shared/_Layout.cshtml";

    ViewBag.Title = "案件管理";
    ViewBag.FunctionTitle = "案件管理";
    ViewBag.Script = @"
var categoryMenu = {
async: {
enable: true,
url: """ + Url.Action("GetCategory", "Service") + @""",
autoParam:[""id""],
dataFilter: categoryFilter
},
callback: {
onAsyncSuccess: categoryTreeOnAsyncSuccess
}
};

function categoryFilter(treeId, parentNode, childNodes) {
if (!childNodes) return null;
for (var i=0, l=childNodes.length; i<l; i++) {
childNodes[i].name = childNodes[i].name.replace(/\.n/g, '.');
childNodes[i].click = 'doServiceList('+childNodes[i].id+')';
}
return childNodes;
}

var firstCategoryAsyncSuccessFlag = true;
function categoryTreeOnAsyncSuccess(event, treeId, treeNode) {
if(firstCategoryAsyncSuccessFlag) {
try {
    var zTree = $.fn.zTree.getZTreeObj(treeId);
    var nodes = zTree.getNodes();
    var id = " + ViewBag.ExpandId + @";
    var listId = " + ViewBag.ListId + @";

    if ( listId != 0 ) doServiceList(listId);

    if ( id == 0 || !nodes) return null;

    for(var i=0; i<nodes.length; i++) {
        if(nodes[i].id == id) {
            zTree.expandNode(nodes[i], true);
            break;
        }
    }

    firstAsyncSuccessFlag = false;
} catch (ex) {}
}
}

function doServiceList(id) {
var url = '" + Url.Action("ServiceList", "Service") + @"/' + id + ' #detail1';
$('#detail').empty().load(url);
$('#list').empty();
}

function doCategoryAction(type, id) {
var url = """";

if(type == 'N') {
url = '" + Url.Action("CategoryNew", "Service") + @"';

if(typeof(id) != 'undefined') {
    url += '/' + id;
}
} else if(type == 'E') {
url = '" + Url.Action("CategoryEdit", "Service") + @"/' + id;
} else if(type == 'D') {
$.ajax({
    cache: false,
    type : 'post',
    url : '" + Url.Action("CategoryDelete", "Service") + @"/' + id,
    dataType : 'json',
    success : doCategoryActionSuccess
});
return;
}

if(url != '') {
$('#detail').empty().load(url, function() {
    $('#ActionForm').removeData('validator');
    $.validator.unobtrusive.parse('#ActionForm');
});
}
}

function doCategoryActionSuccess(res) {
if(res.status) {
jAlert(res.message, function() {
    $.fn.zTree.init($(""#categoryTree""), categoryMenu);
    $('#detail').empty();
    $('#list').empty();
});
} else {
jAlert(res.message);
}
}

function doServiceActionSuccess(res) {
if(res.status) {
jAlert(res.message, function() {
    doServiceList(res.id);
});
} else {
jAlert(res.message);
}
}

function doAction(type) {
var message = '';

if($(""input[name='ActionId']:checked"").length == 0) {
jAlert('請至少選擇一個案件');
return;
}

if(type == 'D') { // 案件刪除
message += '確定要刪除下列案件？<br />';
} else if(type == 'U') { // 案件上線
message += '確定要將下列案件上線？<br />';
} else if(type == 'L') { // 案件下線
message += '確定要將下列案件下線？<br />';
} else if(type == 'O') { // 案件上線
message += '確定要將下列案件開放申辦？<br />';
} else if(type == 'C') { // 案件下線
message += '確定要將下列案件關閉申辦？<br />';
}

$(""input[name='ActionId']:checked"").each(function (){
message += $(this).val().split(',')[1] + '<br />';
});

var fun = function () {
$('#Type').val(type);
$('#ServiceForm').submit();
};

jConfirm(message, fun);
}

function checkAll(obj, name) {

$(""input[name='""+name+""']"").each(function (){
$(this).prop('checked', obj.checked);
});
}

$(function () {
$.fn.zTree.init($(""#categoryTree""), categoryMenu);
});
";

            
            #line default
            #line hidden
WriteLiteral("\r\n<div");

WriteLiteral(" class=\"bread\"");

WriteLiteral(">\r\n    <i");

WriteLiteral(" class=\"fas fa-home\"");

WriteLiteral("></i>首頁 / 案件設定 / ");

            
            #line 156 "..\..\Areas\BACKMIN\Views\Service\Index.cshtml"
                                      Write(ViewBag.FunctionTitle);

            
            #line default
            #line hidden
WriteLiteral("\r\n</div>\r\n<div");

WriteLiteral(" class=\"col-sm-12 content\"");

WriteLiteral(">\r\n    <h1");

WriteLiteral(" class=\"main-title\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fas fa-edit\"");

WriteLiteral("></i>");

            
            #line 159 "..\..\Areas\BACKMIN\Views\Service\Index.cshtml"
                                                 Write(ViewBag.FunctionTitle);

            
            #line default
            #line hidden
WriteLiteral("</h1>\r\n    <div");

WriteLiteral(" class=\"form-blue form-horizontal\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" style=\"float: left; width:20%;\"");

WriteLiteral(">\r\n");

            
            #line 162 "..\..\Areas\BACKMIN\Views\Service\Index.cshtml"
            
            
            #line default
            #line hidden
            
            #line 162 "..\..\Areas\BACKMIN\Views\Service\Index.cshtml"
             if (ViewBag.IsBaseNew)
            {

            
            #line default
            #line hidden
WriteLiteral("                <input");

WriteLiteral(" type=\"button\"");

WriteLiteral(" value=\"新增主分類\"");

WriteLiteral(" class=\"btn btn-save\"");

WriteLiteral(" onclick=\"doCategoryAction(\'N\');\"");

WriteLiteral(" />\r\n");

            
            #line 165 "..\..\Areas\BACKMIN\Views\Service\Index.cshtml"
            }

            
            #line default
            #line hidden
WriteLiteral("            <ul");

WriteLiteral(" id=\"categoryTree\"");

WriteLiteral(" class=\"ztree\"");

WriteLiteral("></ul>\r\n        </div>\r\n        <div");

WriteLiteral(" style=\"float: left; width:80%;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" id=\"detail\"");

WriteLiteral("></div>\r\n            <div");

WriteLiteral(" id=\"list\"");

WriteLiteral("></div>\r\n        </div>\r\n    </div>\r\n</div>");

        }
    }
}
#pragma warning restore 1591

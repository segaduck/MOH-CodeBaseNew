#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     這段程式碼是由工具產生的。
//     執行階段版本:4.0.30319.42000
//
//     對這個檔案所做的變更可能會造成錯誤的行為，而且如果重新產生程式碼，
//     變更將會遺失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ES.Views.Apply_001037
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 3 "..\..\Views\Apply_001037\Pay.cshtml"
    using ES.Commons;
    
    #line default
    #line hidden
    using ES.Helpers;
    
    #line 2 "..\..\Views\Apply_001037\Pay.cshtml"
    using ES.Models;
    
    #line default
    #line hidden
    
    #line 1 "..\..\Views\Apply_001037\Pay.cshtml"
    using ES.Models.Entities;
    
    #line default
    #line hidden
    using JQueryUIHelpers;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Apply_001037/Pay.cshtml")]
    public partial class Pay : System.Web.Mvc.WebViewPage<ES.Models.ViewModels.Apply_001037ViewModel>
    {
        public Pay()
        {
        }
        public override void Execute()
        {
            
            #line 6 "..\..\Views\Apply_001037\Pay.cshtml"
  Layout = null; 
            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n<div");

WriteLiteral(" class=\"col-sm-12\"");

WriteLiteral(">\r\n\r\n    <h1");

WriteLiteral(" class=\"form-title  title-bg-y\"");

WriteLiteral(">選擇繳費方式</h1>\r\n    <div");

WriteLiteral(" class=\"form-set\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"form-group\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" class=\"step-label col-sm-2\"");

WriteLiteral(" for=\"\"");

WriteLiteral(">繳費方式</label>\r\n                <div");

WriteLiteral(" class=\"col-sm-10\"");

WriteLiteral(">\r\n                    <input");

WriteLiteral(" id=\"PAY_METHOD_GROUP\"");

WriteLiteral(" name=\"PAY_METHOD_GROUP\"");

WriteLiteral(" onclick=\"changePayMethod(this);\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" value=\"C\"");

WriteLiteral(">信用卡線上刷卡（電子化政府網路付費服務）<br>\r\n                    <input");

WriteLiteral(" id=\"PAY_METHOD_GROUP\"");

WriteLiteral(" name=\"PAY_METHOD_GROUP\"");

WriteLiteral(" onclick=\"changePayMethod(this);\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" value=\"D\"");

WriteLiteral("> 匯票(抬頭：衛生福利部）<br>\r\n                    <input");

WriteLiteral(" id=\"PAY_METHOD_GROUP\"");

WriteLiteral(" name=\"PAY_METHOD_GROUP\"");

WriteLiteral(" onclick=\"changePayMethod(this);\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" value=\"T\"");

WriteLiteral("> 劃撥（見註一、註三）<br>\r\n                    <input");

WriteLiteral(" id=\"PAY_METHOD_GROUP\"");

WriteLiteral(" name=\"PAY_METHOD_GROUP\"");

WriteLiteral(" onclick=\"changePayMethod(this);\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" value=\"B\"");

WriteLiteral("> 臨櫃（現金，見註二）<br>\r\n                    <input");

WriteLiteral(" id=\"PAY_METHOD_GROUP\"");

WriteLiteral(" name=\"PAY_METHOD_GROUP\"");

WriteLiteral(" onclick=\"changePayMethod(this);\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" value=\"S\"");

WriteLiteral("> 超商（見註五）\r\n");

WriteLiteral("                    ");

            
            #line 20 "..\..\Views\Apply_001037\Pay.cshtml"
               Write(Html.HiddenFor(x => x.PAY_METHOD));

            
            #line default
            #line hidden
WriteLiteral(";\r\n                </div>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"form-group\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" class=\"step-label col-sm-2\"");

WriteLiteral(" for=\"\"");

WriteLiteral(">申請時應繳費用</label>\r\n                <div");

WriteLiteral(" class=\"col-sm-10\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 26 "..\..\Views\Apply_001037\Pay.cshtml"
               Write(Html.TextBoxFor(x=>x.PAY_A_FEE, new { @class = "form-control", @readonly="readonly"}));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"form-group\"");

WriteLiteral(" id=\"TR_CARD_IDN\"");

WriteLiteral(" style=\"display: none;\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" class=\"step-label col-sm-2\"");

WriteLiteral(" for=\"\"");

WriteLiteral(">持卡人身分證號/居留證號</label>\r\n                <div");

WriteLiteral(" class=\"col-sm-10\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 32 "..\..\Views\Apply_001037\Pay.cshtml"
               Write(Html.TextBoxFor(x => x.CARD_IDN, new { @class = "form-control" , @placeholder = "請輸入持卡人身份證字號/居留證號" }));

            
            #line default
            #line hidden
WriteLiteral("\r\n                    <span");

WriteLiteral(" style=\"color: red; font-weight: bold;\"");

WriteLiteral(">請使用申請人信用卡繳費</span>\r\n                </div>\r\n            </div>\r\n            <div" +
"");

WriteLiteral(" class=\"form-group\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" class=\"step-label col-sm-2\"");

WriteLiteral(" for=\"\"");

WriteLiteral(">註一</label>\r\n                <div");

WriteLiteral(" class=\"col-sm-10\"");

WriteLiteral(" style=\"margin-top:10px\"");

WriteLiteral(">\r\n                    <font");

WriteLiteral(" color=\"#CC3333\"");

WriteLiteral(">請於郵寄繳費憑據時加註「申請編號」，以利核銷。</font>\r\n                </div>\r\n            </div>\r\n    " +
"        <div");

WriteLiteral(" class=\"form-group\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" class=\"step-label col-sm-2\"");

WriteLiteral(" for=\"\"");

WriteLiteral(">註二</label>\r\n                <div");

WriteLiteral(" class=\"col-sm-10\"");

WriteLiteral(" style=\"margin-top:10px\"");

WriteLiteral(">\r\n                    <font");

WriteLiteral(" color=\"#CC3333\"");

WriteLiteral(">請於現場繳費時告知「申請編號」，以利核銷。</font>\r\n                </div>\r\n            </div>\r\n      " +
"      <div");

WriteLiteral(" class=\"form-group\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" class=\"step-label col-sm-2\"");

WriteLiteral(" for=\"\"");

WriteLiteral(">註三</label>\r\n                <div");

WriteLiteral(" class=\"col-sm-10\"");

WriteLiteral(">\r\n                    <font");

WriteLiteral(" color=\"#CC3333\"");

WriteLiteral(">劃撥金額須外加手續費(金額1,000元以下，每筆15元；1,001元以上，每筆20元手續費，詳情請參考<a");

WriteLiteral(" href=\"http://www.post.gov.tw/post/index.jsp\"");

WriteLiteral(" target=\"_blank\"");

WriteLiteral(">中華郵政全球資訊網</a>)。</font>\r\n                </div>\r\n            </div>\r\n\r\n          " +
"  <div");

WriteLiteral(" class=\"form-group\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" class=\"step-label col-sm-2\"");

WriteLiteral(" for=\"\"");

WriteLiteral(">註四</label>\r\n                <div");

WriteLiteral(" class=\"col-sm-10\"");

WriteLiteral(">\r\n                    <font");

WriteLiteral(" color=\"#CC3333\"");

WriteLiteral(">使用信用卡繳費時請注意，刷卡繳費完成後該系統會自動導回本申辦頁面，並成功取得案件編號才算完成此案件申辦。</font>\r\n                </d" +
"iv>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"form-group\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" class=\"step-label col-sm-2\"");

WriteLiteral(" for=\"\"");

WriteLiteral(">註五</label>\r\n                <div");

WriteLiteral(" class=\"col-sm-10\"");

WriteLiteral(">\r\n                    <font");

WriteLiteral(" color=\"#CC3333\"");

WriteLiteral(">使用超商繳費時，須外加手續費 ");

            
            #line 64 "..\..\Views\Apply_001037\Pay.cshtml"
                                                    Write(Html.Raw(ES.Utils.DataUtils.GetConfig("PAY_STORE_FEE")));

            
            #line default
            #line hidden
WriteLiteral(" 元。</font>\r\n                </div>\r\n            </div>\r\n\r\n            <div");

WriteLiteral(" class=\"btn-bar text-center\"");

WriteLiteral(">\r\n                <button");

WriteLiteral(" type=\"button\"");

WriteLiteral(" id=\"btnSave\"");

WriteLiteral(" class=\"btn btn-save\"");

WriteLiteral(" onclick=\"doSave()\"");

WriteLiteral(">確認送出</button>\r\n                <button");

WriteLiteral(" type=\"button\"");

WriteLiteral(" id=\"btnReset\"");

WriteLiteral("class=\"btn btn-clear\"");

WriteLiteral(">清除資料</button>\r\n            </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">

    $(document).ready(function () { 
        blockAlert('如需開立收據者，請以書面辦理。', ""訊息""); 
    }); 

    function changePayMethod(obj) {
        if (obj.value == 'C') {
            $('#TR_CARD_IDN').show();
            blockAlert(""線上付款刷卡接受台灣地區發行之MasterCard®, Visa®, JCB®之信用卡。"", ""訊息"");
        } else {
            $('#TR_CARD_IDN').hide();
        }
        $('#PAY_METHOD').val($(obj).val());
    }

    function doSave() {

        if ($('#PAY_METHOD').val() == '') {
            blockAlert('請選擇繳費方式!!', ""訊息"");
        }
        else if ($('#PAY_METHOD').val() == 'C' && $('#CARD_IDN').val()=='' ) {
            blockAlert('請輸入持卡人身份證字號/居留證號!!', ""訊息"");
        }
        else if ($('#PAY_METHOD').val() == 'C' && !doIDNVerfi($('#CARD_IDN').val()) && !doResidentIDVerify($('#CARD_IDN').val())) {
            blockAlert('請輸入""正確""持卡人身份證字號/居留證號', '訊息');
        }
        else {
            save();
        }

    } 

    function save() {
            blockUI();
            var form = $(""form[id=main_form]"");
            form.attr('action', '");

            
            #line 112 "..\..\Views\Apply_001037\Pay.cshtml"
                            Write(Url.Action("Save"));

            
            #line default
            #line hidden
WriteLiteral(@"').submit();
    }
 
    //身分證編號檢核
    function doIDNVerfi(CARD_IDN) {
        var idStr = CARD_IDN;
        var v = 0;

        tab = ""ABCDEFGHJKLMNPQRSTUVXYWZIO""
        A1 = new Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3);
        A2 = new Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5);
        Mx = new Array(9, 8, 7, 6, 5, 4, 3, 2, 1, 1);

        if (idStr.length != 10) return false;
        var i = tab.indexOf(idStr.charAt(0));
        if (i == -1) return false;
        var sum = A1[i] + A2[i] * 9;

        for (i = 1; i < 10; i++) {
            v = parseInt(idStr.charAt(i));
            if (isNaN(v)) return false;
            sum = sum + v * Mx[i];
        }
        debugger;
        if (sum % 10 != 0) return false;
        return true;
    }

    //居留證號檢核
    ");

WriteLiteral(@"
    function doResidentIDVerify(CARD_IDN) {
        var idStr = CARD_IDN;

            //if (! /^[a-zA-Z]{1}[a-dA-D1-2]{1}[0-9]{8}$/.test(idStr)) {
            if (isNaN(idStr.substr(2, 8)) ||
                    (!/^[A-Z]$/.test(idStr.substr(0, 1))) ||
                        (!/^[A-Z]$/.test(idStr.substr(1, 1)))) {
                return false;
            } else {
                var id_ = idStr.toUpperCase();
                var sum = 0;
                var str1 = ""ABCDEFGHIJKLMNOPQRSTUVWXYZ"";
                var str2 = ""1011121314151617341819202122352324252627282932303133"";
                var t1 = str2.substr(str1.indexOf(idStr.substr(0, 1)) * 2, 2);
                var t2 = str2.substr(str1.indexOf(idStr.substr(1, 1)) * 2, 2);

                sum = t1.substr(0, 1) * 1 + t1.substr(1, 1) * 9;
                sum += (t2 % 10) * 8;

                var t10 = idStr.substr(9, 1);

                for (t_i = 3; t_i <= 9; t_i++) {
                    sum += idStr.substr(t_i - 1, 1) * (10 - t_i);
                }

                (sum % 10 == 0) ? t10_ = 0 : t10_ = 10 - (sum % 10);
                debugger;
                return (t10_ == t10 ? true : false);
            }
        }
</script>
");

        }
    }
}
#pragma warning restore 1591

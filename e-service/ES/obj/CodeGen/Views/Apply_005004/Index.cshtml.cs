#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     這段程式碼是由工具產生的。
//     執行階段版本:4.0.30319.42000
//
//     對這個檔案所做的變更可能會造成錯誤的行為，而且如果重新產生程式碼，
//     變更將會遺失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ES.Views.Apply_005004
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using ES.Helpers;
    
    #line 1 "..\..\Views\Apply_005004\Index.cshtml"
    using ES.Models;
    
    #line default
    #line hidden
    
    #line 2 "..\..\Views\Apply_005004\Index.cshtml"
    using ES.Models.ViewModels;
    
    #line default
    #line hidden
    using JQueryUIHelpers;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Apply_005004/Index.cshtml")]
    public partial class Index : System.Web.Mvc.WebViewPage<Apply_005004FormModel>
    {
        public Index()
        {
        }
        public override void Execute()
        {
            
            #line 5 "..\..\Views\Apply_005004\Index.cshtml"
  
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    ShareCodeListModel sc = new ShareCodeListModel();

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n");

            
            #line 10 "..\..\Views\Apply_005004\Index.cshtml"
 using (Html.BeginForm("Apply", "Apply_005004", FormMethod.Post, htmlAttributes: new { @class = "form-horizontal", id = "main_form", enctype = "multipart/form-data" }))
{

            
            #line default
            #line hidden
WriteLiteral("    <div");

WriteLiteral(" class=\"container\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"col-sm-12\"");

WriteLiteral(">\r\n            <!-- bread  -->\r\n            <div");

WriteLiteral(" class=\"breadlink\"");

WriteLiteral(">\r\n                <i");

WriteLiteral(" class=\"fas fa-home\"");

WriteLiteral("></i><a");

WriteAttribute("href", Tuple.Create(" href=\"", 542), Tuple.Create("\"", 580)
            
            #line 16 "..\..\Views\Apply_005004\Index.cshtml"
, Tuple.Create(Tuple.Create("", 549), Tuple.Create<System.Object, System.Int32>(Url.Action("Index", "Login")
            
            #line default
            #line hidden
, 549), false)
);

WriteLiteral(">首頁</a> ／ <a");

WriteAttribute("href", Tuple.Create(" href=\"", 593), Tuple.Create("\"", 633)
            
            #line 16 "..\..\Views\Apply_005004\Index.cshtml"
                         , Tuple.Create(Tuple.Create("", 600), Tuple.Create<System.Object, System.Int32>(Url.Action("Index", "Service")
            
            #line default
            #line hidden
, 600), false)
);

WriteLiteral(">申辦服務</a> ／ <a");

WriteLiteral(" href=\"#\"");

WriteLiteral(">中藥GMP廠證明文件(中文)</a>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"clearfix\"");

WriteLiteral("></div>\r\n            <div");

WriteLiteral(" class=\"step_map\"");

WriteLiteral(">\r\n                <ul>\r\n                    <li");

WriteLiteral(" id=\"apply\"");

WriteLiteral(" class=\"active\"");

WriteLiteral(">填寫申報表件並上傳檔案</li>\r\n                    <li");

WriteLiteral(" id=\"preview\"");

WriteLiteral(">預覽申辦表件</li>\r\n                    <li");

WriteLiteral(" id=\"pay\"");

WriteLiteral(">繳費</li>\r\n                    <li");

WriteLiteral(" id=\"save\"");

WriteLiteral(">完成申報</li>\r\n                </ul>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"tab-content\"");

WriteLiteral(" id=\"myTabContent\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"form\"");

WriteLiteral(" class=\"tab-pane fade active in\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 29 "..\..\Views\Apply_005004\Index.cshtml"
               Write(Html.Partial("Apply"));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n                <div");

WriteLiteral(" id=\"form1\"");

WriteLiteral(" class=\"tab-pane fade\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 32 "..\..\Views\Apply_005004\Index.cshtml"
               Write(Html.Partial("PreView005004"));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n                <div");

WriteLiteral(" id=\"form2\"");

WriteLiteral(" class=\"tab-pane fade\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 35 "..\..\Views\Apply_005004\Index.cshtml"
               Write(Html.Partial("Pay"));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n                <div");

WriteLiteral(" id=\"form3\"");

WriteLiteral(" class=\"tab-pane fade\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 38 "..\..\Views\Apply_005004\Index.cshtml"
               Write(Html.Partial("Save"));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n");

            
            #line 43 "..\..\Views\Apply_005004\Index.cshtml"
}

            
            #line default
            #line hidden
WriteLiteral(@"
<script>
    $(document).ready(function() {
        $('#TAX_ORG_CITY_CODE').on('blur', doTAX_ORG_CITYNameGet);
        doTAX_ORG_CITYNameGet();
        $(""#RadioYN"").val(""N"");
        PLChange();
    });

    //製造廠許可編號查詢按鈕
    function search() {
        var dataApply = getFormDataToObject($(""form[id=main_form]""));
        ajaxLoadMore('");

            
            #line 56 "..\..\Views\Apply_005004\Index.cshtml"
                 Write(Url.Action("getGMPData"));

            
            #line default
            #line hidden
WriteLiteral(@"', dataApply, function(resp) {
            if (resp.status) {
                //介接成功，帶回頁面
                console.log(resp.message);
                $(""#MF_CNT_NAME"").val(resp.data.名稱);
                $(""#TAX_ORG_CITY_CODE"").val(resp.data.郵遞區號);
                doTAX_ORG_CITYNameGet();
                $(""#TAX_ORG_CITY_DETAIL"").val(resp.data.營業地址);
                $(""#CHR_NAME"").val(resp.data.負責人);
                var strDate = toTaiwanDate(resp.data.查廠日期, '/')
                $(""#ISSUE_DATE_TW"").val(strDate);
                $(""#ISSUE_DATE_TW"").blur();
                blockAlert(""已取回資料"", ""提示訊息"");
            } else {
                blockAlert(resp.message, ""提示訊息"");
            }
        });
    }

    //自動帶入製造廠資料勾選
    function atuoFinish(check) {
        if (check.checked) {
            var dataApply = getFormDataToObject($(""form[id=main_form]""));
            ajaxLoadMore('");

            
            #line 79 "..\..\Views\Apply_005004\Index.cshtml"
                     Write(Url.Action("getMemberData"));

            
            #line default
            #line hidden
WriteLiteral("\', dataApply, function(resp) {\r\n                if (resp.status) {\r\n             " +
"       //介接成功，帶回頁面\r\n                    console.log(resp.data);\r\n               " +
"     var memberData = JSON.parse(resp.data).UserInfo.Member;\r\n                  " +
"  $(\"#NAME\").val(memberData.NAME);//公司名稱\r\n\r\n                    var TEL = member" +
"Data.TEL;\r\n                    if (!isNullOrEmpty(TEL)) {\r\n                     " +
"   $(\"#TEL_BEFORE\").val(TEL.split(\"-\")[0]);//電話\r\n                        var tel" +
"Split = TEL.split(\"-\")[1].split(\"#\");\r\n                        $(\"#TEL_AFTER\").v" +
"al(telSplit[0]);\r\n                        if (telSplit.length > 1) {\r\n          " +
"                  $(\"#TEL_Extension\").val(telSplit[1]);\r\n                       " +
" }\r\n                    }\r\n\r\n                    var FAX = memberData.FAX;\r\n    " +
"                if (!isNullOrEmpty(FAX)) {\r\n                        $(\"#FAX_BEFO" +
"RE\").val(FAX.split(\"-\")[0]);//傳真\r\n                        var faxSplit = TEL.spl" +
"it(\"-\")[1].split(\"#\");\r\n                        $(\"#FAX_AFTER\").val(faxSplit[0])" +
";\r\n                        if (faxSplit.length > 1) {\r\n                         " +
"   $(\"#FAX_Extension\").val(faxSplit[1]);\r\n                        }\r\n           " +
"         }\r\n\r\n                    $(\"#CHR_NAME\").val(memberData.CHR_NAME);//負責人姓" +
"名\r\n                    $(\"#CNT_NAME\").val(memberData.CNT_NAME);//聯絡人姓名\r\n\r\n      " +
"              blockAlert(\"已取回資料\", \"提示訊息\");\r\n                } else {\r\n          " +
"          blockAlert(resp.message, \"提示訊息\");\r\n                }\r\n            });\r" +
"\n        }\r\n    }\r\n\r\n    //明細頁面返回\r\n    function Detail_back() {\r\n\r\n    }\r\n\r\n    " +
"//申請頁面送出\r\n    function send_apply() {\r\n        var ErrMsg = \"\";\r\n        //合併檔案檢" +
"查\r\n        if ($(\'input[name=\"optradio\"]:checked\').val() == \"Y\") {\r\n            " +
"var fileExist = 0;\r\n            for (var i = 1; i <= 3; i++) {\r\n                " +
"if ($(\"#File_\" + i).val() != \"\") {\r\n                    fileExist++;\r\n          " +
"      }\r\n            }\r\n            if (fileExist == 0) {\r\n                ErrMs" +
"g += \"請至少上傳一筆檔案!\\r\\n\";\r\n            }\r\n        }\r\n        //產品類別勾選檢查\r\n        if" +
" (!$(\"#IS_TRA_CHECK\").prop(\"checked\") && !$(\"#IS_CON_CHECK\").prop(\"checked\")) {\r" +
"\n            ErrMsg += \"請至少勾選一項產品類別!\\r\\n\";\r\n        }\r\n\r\n        //產品類別勾選項目檢查\r\n " +
"       //if ($(\"#IS_CON_CHECK\").prop(\"checked\")) {\r\n        //    if($(\"#conTabl" +
"e tbody tr\").length == 0) {\r\n        //        ErrMsg += \"製劑項目未選取\\r\\n\";\r\n       " +
" //    }\r\n        //}\r\n\r\n        //if ($(\"#IS_TRA_CHECK\").prop(\"checked\")) {\r\n  " +
"      //    if ($(\"#traTable tbody tr\").length == 0) {\r\n        //        ErrMsg" +
" += \"原料藥項目未選取\\r\\n\";\r\n        //    }\r\n        //}\r\n\r\n        if (ErrMsg == \"\") {" +
"\r\n            var dataApply = getFormDataToObject($(\"form[id=main_form]\"));\r\n   " +
"         ajaxLoadMore(\'");

            
            #line 157 "..\..\Views\Apply_005004\Index.cshtml"
                     Write(Url.Action("Apply"));

            
            #line default
            #line hidden
WriteLiteral(@"',
                dataApply,
                function (retData) {
                    if (retData.status) {
                        $(""#traTable tbody tr"").each(function () {
                            $(""#TRA_ITEM"").val($(""#TRA_ITEM"").val() + $(this).children('td').children('input').eq(0).val() + "","");
                            $(""#TRA_ITEM_CD"").val($(""#TRA_ITEM_CD"").val() + $(this).children('td').children('input').eq(1).val() + "","");
                        });
                        $(""#conTable tbody tr"").each(function () {
                            $(""#CON_ITEM"").val($(""#CON_ITEM"").val() + $(this).children('td').children('input').eq(0).val() + "","");
                            $(""#CON_ITEM_CD"").val($(""#CON_ITEM_CD"").val() + $(this).children('td').children('input').eq(1).val() + "","");
                        });
                        var data = getFormDataToObject($(""form[id=main_form]""));
                        ajaxLoadMore('");

            
            #line 170 "..\..\Views\Apply_005004\Index.cshtml"
                                 Write(Url.Action("PreView"));

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                            data,\r\n                            function (getH" +
"tml) {\r\n                                $(\'#apply\').removeClass(\'active\');\r\n    " +
"                            $(\'#preview\').attr(\'class\', \'active\');\r\n            " +
"                    $(\'#form\').attr(\'class\', \'tab-pane fade\');\r\n                " +
"                $(\'#form1\').attr(\'class\', \'tab-pane fade active in\');\r\n         " +
"                       $(\"#form1\").html(getHtml);\r\n                            }" +
");\r\n                    } else {\r\n                        blockAlert(retData.mes" +
"sage, \"提示訊息\");\r\n                    }\r\n                });\r\n        } else {\r\n  " +
"          blockAlert(ErrMsg, \"提示訊息\");\r\n        }\r\n    }\r\n\r\n    //預覽頁面返回\r\n    fun" +
"ction back_preview() {\r\n        $(\'#traTablePre tbody tr\').empty();\r\n        $(\'" +
"#conTablePre tbody tr\').empty();\r\n        $(\"#TRA_ITEM\").val(\"\");\r\n        $(\"#T" +
"RA_ITEM_CD\").val(\"\");\r\n        $(\"#CON_ITEM\").val(\"\");\r\n        $(\"#CON_ITEM_CD\"" +
").val(\"\");\r\n        $(\'#preview\').removeClass(\'active\');\r\n        $(\'#apply\').at" +
"tr(\'class\', \'active\');\r\n        $(\'#form1\').attr(\'class\', \'tab-pane fade\');\r\n   " +
"     $(\'#form\').attr(\'class\', \'tab-pane fade active in\');\r\n    }\r\n\r\n    //預覽頁面送出" +
"\r\n    function send_preview() {\r\n        $(\'#preview\').removeClass(\'active\');\r\n " +
"       $(\'#pay\').attr(\'class\', \'active\');\r\n        $(\'#form1\').attr(\'class\', \'ta" +
"b-pane fade\');\r\n        $(\'#form2\').attr(\'class\', \'tab-pane fade active in\');\r\n " +
"   }\r\n\r\n    //繳費頁面返回\r\n    function back_pay() {\r\n        $(\'#pay\').removeClass(\'" +
"active\');\r\n        $(\'#apply\').attr(\'class\', \'active\');\r\n        $(\'#form2\').att" +
"r(\'class\', \'tab-pane fade\');\r\n        $(\'#form\').attr(\'class\', \'tab-pane fade ac" +
"tive in\');\r\n    }\r\n\r\n    //繳費頁面送出\r\n    function send_pay() {\r\n        if ($(\"inp" +
"ut[name=\'PAY_METHOD\']:checked\").val() == undefined) {\r\n            blockAlert(\"請" +
"選擇繳費方式!\", \"提示訊息\");\r\n        } else {\r\n            blockUI();\r\n            var fo" +
"rm = $(\"form[id=main_form]\");\r\n            form.attr(\'action\', \'");

            
            #line 225 "..\..\Views\Apply_005004\Index.cshtml"
                            Write(Url.Action("Save"));

            
            #line default
            #line hidden
WriteLiteral("\').submit();\r\n        }\r\n    }\r\n\r\n    //套表列印\r\n    function preview_pay() {\r\n     " +
"   var data = getFormDataToObject($(\"form[id=main_form]\"));\r\n        $.fileDownl" +
"oad(\'");

            
            #line 232 "..\..\Views\Apply_005004\Index.cshtml"
                   Write(Url.Action("PreviewApplyForm"));

            
            #line default
            #line hidden
WriteLiteral("\', {\r\n            httpMethod: \'post\',\r\n            data: data,\r\n            prepa" +
"reCallback: function (url) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    //原料藥勾選" +
"\r\n    function traCheck(check) {\r\n        //if (check.checked) {\r\n        //    " +
"$(\"#traDiv\").attr(\"hidden\", false);\r\n        //} else {\r\n        //    $(\"#traDi" +
"v\").attr(\"hidden\", true);\r\n        //}\r\n    }\r\n\r\n    //製劑勾選\r\n    function conChe" +
"ck(check) {\r\n        //if (check.checked) {\r\n        //    $(\"#conDiv\").attr(\"hi" +
"dden\", false);\r\n        //} else {\r\n        //    $(\"#conDiv\").attr(\"hidden\", tr" +
"ue);\r\n        //}\r\n    }\r\n\r\n    //原料藥/製劑新增\r\n    function TraConAdd(item) {\r\n    " +
"    if ($(\"#\" + item.toUpperCase() + \" :selected\").val() == \"\") {\r\n            b" +
"lockAlert(\"請選擇項目!\", \"提示訊息\");\r\n        } else {\r\n            var countCheck = 0;\r" +
"\n            $(\"#\" + item + \"Table\").attr(\"hidden\", false);\r\n            $(\"#\" +" +
" item + \"Table tbody tr\").each(function () {\r\n                if ($(this).childr" +
"en(\'td\').children(\'input\').eq(0).val() == $(\"#\" + item.toUpperCase() + \" :select" +
"ed\").text()) {\r\n                    blockAlert(\"已存在此筆項目!\", \"提示訊息\");\r\n           " +
"         countCheck++;\r\n                }\r\n            });\r\n            if (coun" +
"tCheck == 0) {\r\n                var itemNum = $(\"#\" + item + \"Table tbody tr\").l" +
"ength + 1;\r\n                var td = \"<tr id=\'row\" + item + itemNum + \"\'>\";\r\n   " +
"             td += \"<td><input type=\'text\' class=\'form-control\' value=\" + $(\"#\" " +
"+ item.toUpperCase() + \" :selected\").text() + \" readonly />\";\r\n                t" +
"d += \"<input type=\'text\' value=\" + $(\"#\" + item.toUpperCase() + \" :selected\").va" +
"l() + \" hidden></td>\";\r\n                td += \"<td><button type=\'button\' class=\'" +
"btn btn-clear\' onclick=\'TraConDel(\\\"row\" + item + itemNum + \"\\\",\\\"\" + item + \"\\\"" +
")\'>刪除</button></td></tr>\";\r\n\r\n                $(\"#\" + item + \"Table tbody\").appe" +
"nd(td);\r\n            }\r\n        }\r\n    }\r\n\r\n    //原料藥/製劑刪除\r\n    function TraConD" +
"el(delRow, item) {\r\n        $(\"#\" + delRow + \"\").remove();\r\n        if ($(\"#\" + " +
"item + \"Table tbody tr\").length == 0) {\r\n            $(\"#\" + item + \"Table\").att" +
"r(\"hidden\", true);\r\n        }\r\n    }\r\n\r\n    // 地址\r\n    function loadDialogTAX_OR" +
"G_CITYCodeMapName(data) {\r\n        ajaxLoadMore(data.url,\r\n            data.arg," +
"\r\n            function (resp) {\r\n                if (resp === undefined) data.bo" +
"x.val(\'\');\r\n                else {\r\n                    if (resp.data != \'\') dat" +
"a.box.val(resp.data);\r\n                    else {\r\n                        data." +
"box.val(\'\');\r\n                        data.add.val(\'\');\r\n                       " +
" blockAlert(data.msg);\r\n                    }\r\n                }\r\n            })" +
";\r\n    };\r\n\r\n    function doTAX_ORG_CITYSelect() {\r\n        var url = \'/ZIP_CO\';" +
"\r\n        var title = \'郵遞區號查詢\';\r\n        popupWindow({ \'width\': 900 },\r\n        " +
"    url,\r\n            title,\r\n            null,\r\n            function (retData, " +
"doc) {\r\n                if (retData != null) {\r\n                    $(\'#TAX_ORG_" +
"CITY_CODE\').val(retData.Id);\r\n                    $(\'#TAX_ORG_CITY_TEXT\').val(re" +
"tData.Name);\r\n                }\r\n            });\r\n    }\r\n\r\n    function doTAX_OR" +
"G_CITYNameGet() {\r\n        var code = $(\'#TAX_ORG_CITY_CODE\');\r\n        console." +
"log(\'TAX_ORG_CITY_CODE\');\r\n        var data = {\r\n            \'url\': \'/Ajax/GetCi" +
"tyTown\',\r\n            \'msg\': \'查無該郵遞區號!!\',\r\n            \'arg\': { \'CODE\': code.val" +
"().toUpperCase() },\r\n            \'box\': $(\'#TAX_ORG_CITY_TEXT\'),\r\n            \'a" +
"dd\': $(\'#TAX_ORG_CITY_CODE\')\r\n        };\r\n        if ($.trim(data.arg.CODE) == \'" +
"\') data.box.val(\'\');\r\n        else {\r\n            code.val(data.arg.CODE);\r\n    " +
"        loadDialogTAX_ORG_CITYCodeMapName(data);\r\n        }\r\n    }\r\n\r\n    functi" +
"on EmailChange() {\r\n        $(\"#EMAIL_ADDR_TEXT\").val($(\"#EMAIL_ADDR :selected\")" +
".text());\r\n    }\r\n\r\n    //function PLChange() {\r\n    //    $(\"#PL_CD_TEXT\").val(" +
"$(\"#PL_CD :selected\").text());\r\n    //}\r\n\r\n    function RadioChange() {\r\n       " +
" $(\"#RadioYN\").val($(\'input[name=\"optradio\"]:checked\').val());\r\n    }\r\n\r\n    fun" +
"ction fileChange(sender) {\r\n        // 可接受的附檔名\r\n        var validExts = new Arra" +
"y(\".DOC\", \".DOCX\", \".ODT\", \".ODF\", \".ODS\", \".XLS\", \".XLSX\", \".PDF\", \".PPT\", \".PP" +
"TX\", \".JPG\", \".JPEG\", \".BMP\", \".PNG\", \".GIF\", \".TIF\", \".ZIP\");\r\n\r\n        var fi" +
"leExt = sender.value;\r\n        fileExt = fileExt.substring(fileExt.lastIndexOf(\'" +
".\'));\r\n        if (validExts.indexOf(fileExt.toUpperCase()) < 0) {\r\n            " +
"blockAlert(\"檔案類型錯誤，可接受的副檔名有：\" + validExts.toString());\r\n            sender.value" +
" = null;\r\n            $(\"#Name_\" + sender.name).val(\'\');\r\n            return fal" +
"se;\r\n        } else {\r\n            $(\"#Name_\" + sender.name).val(sender.files.it" +
"em(0).name);\r\n            return true;\r\n        }\r\n    }\r\n</script>\r\n");

        }
    }
}
#pragma warning restore 1591

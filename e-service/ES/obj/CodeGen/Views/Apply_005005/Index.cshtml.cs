#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     這段程式碼是由工具產生的。
//     執行階段版本:4.0.30319.42000
//
//     對這個檔案所做的變更可能會造成錯誤的行為，而且如果重新產生程式碼，
//     變更將會遺失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ES.Views.Apply_005005
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using ES.Helpers;
    
    #line 1 "..\..\Views\Apply_005005\Index.cshtml"
    using ES.Models;
    
    #line default
    #line hidden
    
    #line 2 "..\..\Views\Apply_005005\Index.cshtml"
    using ES.Models.ViewModels;
    
    #line default
    #line hidden
    using JQueryUIHelpers;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Apply_005005/Index.cshtml")]
    public partial class Index : System.Web.Mvc.WebViewPage<Apply_005005FormModel>
    {
        public Index()
        {
        }
        public override void Execute()
        {
            
            #line 5 "..\..\Views\Apply_005005\Index.cshtml"
  
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    ShareCodeListModel sc = new ShareCodeListModel();

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n");

            
            #line 10 "..\..\Views\Apply_005005\Index.cshtml"
 using (Html.BeginForm("Apply", "Apply_005005", FormMethod.Post, htmlAttributes: new { @class = "form-horizontal", id = "main_form", enctype = "multipart/form-data" }))
{

            
            #line default
            #line hidden
WriteLiteral("    <div");

WriteLiteral(" class=\"container\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"col-sm-12\"");

WriteLiteral(">\r\n            <!-- bread  -->\r\n            <div");

WriteLiteral(" class=\"breadlink\"");

WriteLiteral(">\r\n                <i");

WriteLiteral(" class=\"fas fa-home\"");

WriteLiteral("></i><a");

WriteAttribute("href", Tuple.Create(" href=\"", 542), Tuple.Create("\"", 580)
            
            #line 16 "..\..\Views\Apply_005005\Index.cshtml"
, Tuple.Create(Tuple.Create("", 549), Tuple.Create<System.Object, System.Int32>(Url.Action("Index", "Login")
            
            #line default
            #line hidden
, 549), false)
);

WriteLiteral(">首頁</a> ／ <a");

WriteAttribute("href", Tuple.Create(" href=\"", 593), Tuple.Create("\"", 633)
            
            #line 16 "..\..\Views\Apply_005005\Index.cshtml"
                         , Tuple.Create(Tuple.Create("", 600), Tuple.Create<System.Object, System.Int32>(Url.Action("Index", "Service")
            
            #line default
            #line hidden
, 600), false)
);

WriteLiteral(">申辦服務</a> ／ <a");

WriteLiteral(" href=\"#\"");

WriteLiteral(">中藥GMP廠證明文件(英文)</a>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"clearfix\"");

WriteLiteral("></div>\r\n            <div");

WriteLiteral(" class=\"step_map\"");

WriteLiteral(">\r\n                <ul>\r\n                    <li");

WriteLiteral(" id=\"apply\"");

WriteLiteral(" class=\"active\"");

WriteLiteral(">填寫申報表件並上傳檔案</li>\r\n                    <li");

WriteLiteral(" id=\"preview\"");

WriteLiteral(">預覽申辦表件</li>\r\n                    <li");

WriteLiteral(" id=\"pay\"");

WriteLiteral(">繳費</li>\r\n                    <li");

WriteLiteral(" id=\"save\"");

WriteLiteral(">完成申報</li>\r\n                </ul>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"tab-content\"");

WriteLiteral(" id=\"myTabContent\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"form\"");

WriteLiteral(" class=\"tab-pane fade active in\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 29 "..\..\Views\Apply_005005\Index.cshtml"
               Write(Html.Partial("Apply"));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n                <div");

WriteLiteral(" id=\"form1\"");

WriteLiteral(" class=\"tab-pane fade\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 32 "..\..\Views\Apply_005005\Index.cshtml"
               Write(Html.Partial("PreView005005"));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n                <div");

WriteLiteral(" id=\"form2\"");

WriteLiteral(" class=\"tab-pane fade\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 35 "..\..\Views\Apply_005005\Index.cshtml"
               Write(Html.Partial("Pay"));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n                <div");

WriteLiteral(" id=\"form3\"");

WriteLiteral(" class=\"tab-pane fade\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 38 "..\..\Views\Apply_005005\Index.cshtml"
               Write(Html.Partial("Save"));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n");

            
            #line 43 "..\..\Views\Apply_005005\Index.cshtml"
}

            
            #line default
            #line hidden
WriteLiteral(@"
<script>
    $(document).ready(function() {
        $(""#RadioYN"").val(""N"");
        $(""#pay_paycount"").val($(""#PAYCOUNTSELECT :selected"").val());
        $(""#pay_payamount"").val($(""#PAYAMOUNT"").val());
    });

    //計算繳費金額(n*1500)
    function CalculationVal() {
        $(""#PAYAMOUNT"").val($(""#PAYCOUNTSELECT :selected"").val() * 1500);
        $(""#PAYCOUNT"").val($(""#PAYCOUNTSELECT :selected"").val());

        $(""#pay_paycount"").val($(""#PAYCOUNTSELECT :selected"").val());
        $(""#pay_payamount"").val($(""#PAYCOUNTSELECT :selected"").val() * 1500);
    }

    //製造廠許可編號查詢按鈕
    function search(LIC_NUM) {
        alert(LIC_NUM);
    }

    //申請頁面送出
    function send_apply() {
        var ErrMsg = """";
        //合併檔案檢查
        if ($('input[name=""optradio""]:checked').val() == ""Y"") {
            var fileExist = 0;
            for (var i = 1; i <= 2; i++) {
                if ($(""#File_"" + i).val() != """") {
                    fileExist++;
                }
            }
            if (fileExist == 0) {
                ErrMsg += ""請至少上傳一筆檔案!\r\n"";
            }
        }

        if (ErrMsg == """") {
            var dataApply = getFormDataToObject($(""form[id=main_form]""));
            ajaxLoadMore('");

            
            #line 84 "..\..\Views\Apply_005005\Index.cshtml"
                     Write(Url.Action("Apply"));

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                dataApply,\r\n                function (retData) {\r\n           " +
"         if (retData.status) {\r\n                        var data = getFormDataTo" +
"Object($(\"form[id=main_form]\"));\r\n                        ajaxLoadMore(\'");

            
            #line 89 "..\..\Views\Apply_005005\Index.cshtml"
                                 Write(Url.Action("PreView"));

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                            data,\r\n                            function (getH" +
"tml) {\r\n                                $(\'#apply\').removeClass(\'active\');\r\n    " +
"                            $(\'#preview\').attr(\'class\', \'active\');\r\n            " +
"                    $(\'#form\').attr(\'class\', \'tab-pane fade\');\r\n                " +
"                $(\'#form1\').attr(\'class\', \'tab-pane fade active in\');\r\n         " +
"                       $(\"#form1\").html(getHtml);\r\n                            }" +
");\r\n                    } else {\r\n                        blockAlert(retData.mes" +
"sage, \"提示訊息\");\r\n                    }\r\n                });\r\n        } else {\r\n  " +
"          blockAlert(ErrMsg, \"提示訊息\");\r\n        }\r\n    }\r\n\r\n    //預覽頁面返回\r\n    fun" +
"ction back_preview() {\r\n        $(\'#traTablePre tbody tr\').empty(); \r\n        $(" +
"\'#conTablePre tbody tr\').empty();\r\n        $(\"#TRA_ITEM\").val(\"\");\r\n        $(\"#" +
"TRA_ITEM_CD\").val(\"\");\r\n        $(\"#CON_ITEM\").val(\"\");\r\n        $(\"#CON_ITEM_CD" +
"\").val(\"\");\r\n        $(\'#preview\').removeClass(\'active\');\r\n        $(\'#apply\').a" +
"ttr(\'class\', \'active\');\r\n        $(\'#form1\').attr(\'class\', \'tab-pane fade\');\r\n  " +
"      $(\'#form\').attr(\'class\', \'tab-pane fade active in\');\r\n    }\r\n\r\n    //預覽頁面送" +
"出\r\n    function send_preview() {\r\n        $(\'#preview\').removeClass(\'active\');\r\n" +
"        $(\'#pay\').attr(\'class\', \'active\');\r\n        $(\'#form1\').attr(\'class\', \'t" +
"ab-pane fade\');\r\n        $(\'#form2\').attr(\'class\', \'tab-pane fade active in\');\r\n" +
"    }\r\n\r\n    //繳費頁面返回\r\n    function back_pay() {\r\n        $(\'#pay\').removeClass(" +
"\'active\');\r\n        $(\'#apply\').attr(\'class\', \'active\');\r\n        $(\'#form2\').at" +
"tr(\'class\', \'tab-pane fade\');\r\n        $(\'#form\').attr(\'class\', \'tab-pane fade a" +
"ctive in\');\r\n    }\r\n\r\n    //繳費頁面送出\r\n    function send_pay() {\r\n        if ($(\"in" +
"put[name=\'PAY_METHOD\']:checked\").val() == undefined) {\r\n            blockAlert(\"" +
"請選擇繳費方式!\", \"提示訊息\");\r\n        } else {\r\n            blockUI();\r\n            var f" +
"orm = $(\"form[id=main_form]\");\r\n            form.attr(\'action\', \'");

            
            #line 144 "..\..\Views\Apply_005005\Index.cshtml"
                            Write(Url.Action("Save"));

            
            #line default
            #line hidden
WriteLiteral("\').submit();\r\n        }\r\n    }\r\n\r\n    //套表列印\r\n    function preview_pay() {\r\n     " +
"   var data = getFormDataToObject($(\"form[id=main_form]\"));\r\n        $.fileDownl" +
"oad(\'");

            
            #line 151 "..\..\Views\Apply_005005\Index.cshtml"
                   Write(Url.Action("PreviewApplyForm"));

            
            #line default
            #line hidden
WriteLiteral(@"', {
            httpMethod: 'post',
            data: data,
            prepareCallback: function (url) { 
                
            }
        });
    }

    function EmailChange() {
        $(""#EMAIL_ADDR_TEXT"").val($(""#EMAIL_ADDR :selected"").text());
    }

    function RadioChange() {
        $(""#RadioYN"").val($('input[name=""optradio""]:checked').val());
    }

    function fileChange(sender) {
        // 可接受的附檔名
        var validExts = new Array("".DOC"", "".DOCX"", "".ODT"", "".ODF"", "".ODS"", "".XLS"", "".XLSX"", "".PDF"", "".PPT"", "".PPTX"", "".JPG"", "".JPEG"", "".BMP"", "".PNG"", "".GIF"", "".TIF"", "".ZIP"");

        var fileExt = sender.value;
        fileExt = fileExt.substring(fileExt.lastIndexOf('.'));
        if (validExts.indexOf(fileExt.toUpperCase()) < 0) {
            blockAlert(""檔案類型錯誤，可接受的副檔名有："" + validExts.toString());
            sender.value = null;
            $(""#Name_"" + sender.name).val('');
            return false;
        } else {
            $(""#Name_"" + sender.name).val(sender.files.item(0).name);
            return true;
        }
    }

      //製造廠許可編號查詢按鈕
    function search() {
        var dataApply = getFormDataToObject($(""form[id=main_form]""));
        ajaxLoadMore('");

            
            #line 188 "..\..\Views\Apply_005005\Index.cshtml"
                 Write(Url.Action("getGMPData"));

            
            #line default
            #line hidden
WriteLiteral(@"', dataApply, function(resp) {
            if (resp.status) {
                //介接成功，帶回頁面
                console.log(resp.message);
                //$(""#MF_CNT_NAME"").val(resp.data.名稱);               
                //$(""#MF_ADDR"").val(resp.data.營業地址);
                var strDate1 = toTaiwanDate(resp.data.查廠日期, '/')   
                $(""#ISSUE_DATE"").val(resp.data.查廠日期);
                $(""#ISSUE_DATE_TW"").val(strDate1);
                var strDate2 = toTaiwanDate(resp.data.有效期限, '/')   
                $(""#EXPIR_DATE"").val(resp.data.有效期限);
                $(""#EXPIR_DATE_TW"").val(strDate2);
                blockAlert(""已取回資料"", ""提示訊息"");
            } else {
                blockAlert(resp.message, ""提示訊息"");
            }
        });
    }
</script>
");

        }
    }
}
#pragma warning restore 1591

#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     這段程式碼是由工具產生的。
//     執行階段版本:4.0.30319.42000
//
//     對這個檔案所做的變更可能會造成錯誤的行為，而且如果重新產生程式碼，
//     變更將會遺失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ES.Views.Shared
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using ES.Helpers;
    using JQueryUIHelpers;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Shared/_DatePickerTW.cshtml")]
    public partial class DatePickerTW : System.Web.Mvc.WebViewPage<dynamic>
    {
        public DatePickerTW()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteAttribute("src", Tuple.Create(" src=\"", 32), Tuple.Create("\"", 89)
, Tuple.Create(Tuple.Create("", 38), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/datetimepicker/moment-with-locales.min.js")
, 38), false)
);

WriteLiteral("></script>\r\n<link");

WriteAttribute("href", Tuple.Create(" href=\"", 107), Tuple.Create("\"", 156)
, Tuple.Create(Tuple.Create("", 114), Tuple.Create<System.Object, System.Int32>(Href("~/Content/bootstrap-datetimepicker.min.css")
, 114), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" type=\"text/css\"");

WriteLiteral(" />\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteAttribute("src", Tuple.Create(" src=\"", 225), Tuple.Create("\"", 283)
, Tuple.Create(Tuple.Create("", 231), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/datetimepicker/bootstrap-datetimepicker.js")
, 231), false)
);

WriteLiteral("></script>\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n\r\n    ");

WriteLiteral(@"
    $(document).ready(function () {
        $(""div.date"").each(function () {
            initDatePicker(this);
        });
    });

    function __dtpFindFunc(funcName) {
        var ret = undefined;
        if (funcName && funcName.length > 0) {
            ret = window[funcName];
            if (typeof ret !== ""function"") ret = undefined;
        }
        return ret;
    }

    ");

WriteLiteral("\r\n    ");

WriteLiteral("\r\n    ");

WriteLiteral("\r\n    function initDatePicker(target, callback) {\r\n        $(target).datetimepick" +
"er({\r\n            locale: \'zh-tw\',\r\n            format: \'YYYY/MM/DD\',\r\n         " +
"   showClear: true,\r\n            showClose: true\r\n        }).on(\"dp.change\", fun" +
"ction (e) {\r\n            onDPChangeShowZHDate(e, callback);\r\n        });\r\n\r\n    " +
"    onTextBoxBlur(target, callback);\r\n\r\n        $(target).find(\'.open-datepicker" +
"\').on(\'click\', function(event) {\r\n            try {\r\n                if ($(targe" +
"t).find(\'.open-datepicker\').parent().parent().attr(\'disabled\') != \"disabled\") {\r" +
"\n                    event.preventDefault();\r\n                    $(target).data" +
"(\"DateTimePicker\").show();\r\n                }\r\n            }\r\n            catch " +
"(ex) {\r\n                //blockAlert(\"[initDatePicker] \" + ex.message);\r\n       " +
"     }\r\n            finally {\r\n                //20181012 加入若在頁面內有 dateTimePicke" +
"rShowCallback() 方法時，就自動執行 dateTimePickerShowCallback 方法。\r\n                var fu" +
"nc = __dtpFindFunc(\"dateTimePickerShowCallback\");\r\n                if (func) fun" +
"c.call(window, this);\r\n            }\r\n        });\r\n    }\r\n\r\n    //20180927 增加數字靠" +
"右對齊方法\r\n    function _dpTWLpad(text, length, padChar) {\r\n        if (text !== und" +
"efined && text != null) {\r\n            if (text.length >= length) {\r\n           " +
"     return text;\r\n            }\r\n            else {\r\n                var s = []" +
", c = length - text.length;\r\n                while (c-- > 0) s.push(padChar);\r\n " +
"               s.push(text);\r\n                return s.join(\"\");\r\n            }\r" +
"\n        }\r\n        else return text;\r\n    }\r\n\r\n    ");

WriteLiteral(@"
    function onDPChangeShowZHDate(e, callback) {
        //debug_trace(""onDPChangeShowZHDate: target="");
        //debug_trace(e.target);

        var disInput = $(e.target).find(""input[type=text]"").first();
        var adInput = $(e.target).find(""input[type=text]"").first().attr(""id"") + ""_AC"";
        //debug_trace(""onDPChangeShowZHDate: display input="");
        //debug_trace(disInput);
        if (e.date) {
            var tmpYear = e.date.get('year'); 
            var year = 0;

            if (e.date.locale() == 'zh-tw') {
                if (tmpYear < 1911) {
                    year = tmpYear;
                } else {
                    year = tmpYear - 1911;
                    //year = tmpYear;
                }
                //20180927 將民國年補齊三位數
                year = _dpTWLpad(year.toString(), 3, ""0"");
            } else {
                year = tmpYear;
            }

            var zhDate = year + ""/"" + e.date.format('MM/DD');
            //debug_trace(""onDPChangeShowZHDate: "" + e.date.format('YYYY/MM/DD') + ' -> ' + zhDate);
            disInput.val(zhDate);
            $(""#"" + adInput).val(e.date.format('YYYY/MM/DD'));
            if (callback) {
                callback(e.date.format('YYYY/MM/DD'), zhDate);
            }
        } else {
            disInput.val('');
            if (callback) {
                callback('', '');
            }
        }
    }

    ");

WriteLiteral("\r\n    function onTextBoxBlur(target, callback) {\r\n        var txtInput = $(target" +
").find(\"input[type=text]\").first();\r\n        var hidInput = $(target).find(\"inpu" +
"t[type=hidden]\").first();\r\n        var adInput = $(target).find(\"input[type=text" +
"]\").first().attr(\"id\") + \"_AC\";\r\n\r\n        $(txtInput).on(\'blur\', function () {\r" +
"\n            var dateText = $(txtInput).val();\r\n            if (dateText.length " +
"== 7)\r\n            {\r\n                dateText = dateText.substring(0, 3) + \"/\" " +
"+ dateText.substring(3, 5) + \"/\" + dateText.substring(5,7);          \r\n         " +
"   }\r\n            if (dateText.length == 6) {\r\n                dateText = \"0\" + " +
"dateText.substring(0, 2) + \"/\" + dateText.substring(2, 4) + \"/\" + dateText.subst" +
"ring(4, 6);\r\n            }\r\n            var dateArr = dateText.split(\'\\/\');\r\n   " +
"         if (dateText && dateText.trim().length > 0) {\r\n                //201809" +
"27 將民國年補齊三位數\r\n                //dateArr[0] = parseInt(dateArr[0], 10);\r\n        " +
"        dateText = dateArr.join(\"/\");\r\n               \r\n                var rege" +
"x = /(^[0-9][0-9][0-9]|^[0-9][0-9])(\\/)?[0-1][0-9](\\/)?[0-3][0-9]$/;\r\n          " +
"      if (regex.test(dateText.trim())) {\r\n                    var year = parseIn" +
"t(dateArr[0], 10);\r\n                    if (!isNaN(year)) {\r\n                   " +
"     dateArr[0] = year + 1911;\r\n                        //dateArr[0] = year;\r\n  " +
"                      hidVal = dateArr.join(\'/\');\r\n\r\n                        //2" +
"0180927 將民國年補齊三位數\r\n                        dateArr = dateText.split(\'\\/\');\r\n    " +
"                    dateArr[0] = _dpTWLpad(dateArr[0], 3, \"0\");\r\n               " +
"         dateText = dateArr.join(\"/\");\r\n\r\n                        $(hidInput).va" +
"l(hidVal);\r\n                        $(txtInput).val(dateText);\r\n                " +
"        $(\"#\" + adInput).val(hidVal);\r\n\r\n                        if (callback) {" +
"\r\n                            callback(hidVal, dateText);\r\n                     " +
"   }\r\n                    }\r\n                } else {\r\n                    block" +
"Alert(\"日期格式不正確！（範例：1080101 或是 108/01/01）\");\r\n                    $(txtInput).val" +
"(\'\');\r\n                    $(hidInput).val(\'\');\r\n                    if (callbac" +
"k) {\r\n                        callback(\'\', \'\');\r\n                    }\r\n        " +
"        }\r\n            } else {\r\n                $(hidInput).val(\'\');\r\n         " +
"       if (callback) {\r\n                    callback(\'\', \'\');\r\n                }" +
"\r\n            }\r\n        });\r\n    }\r\n</script>\r\n\r\n");

        }
    }
}
#pragma warning restore 1591
